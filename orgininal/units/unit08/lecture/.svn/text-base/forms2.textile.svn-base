h2. More About HTML Forms with PHP



h3. Redirecting the User

* What if your Web site has moved to a new location? Now when your users go to the old site, you want to redirect them to the new one.
* What if you want to send the user to a different page depending on some condition: Is the user logged on? Did he or she forget his or her password? What language does he or she speak? Is it a holiday?

h3. The Location Header

* Redirecting a user to another page is easy and quick with PHP. It is done with the built-in *@header()@* function to modify the HTTP response header sent by the server.
* The location header can be changed by sending an HTTP Location followed by the URL of the new location.
<br /><pre>
<?php
  header('Location: http://www.mysite.com/new_page.html');
?>
</pre>
* The header information must be sent to the browser before any HTML and text; therefore, it is important that the *@header()@* function is executed first.
* The following example would be wrong because the program is trying to send the echo output before the header information.
* Filename: *badRedirect.php*
<br /><PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;?php</span>
<span class="gutter">   2:</span>  <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">Wrong!</span>
<span class="gutter">   3:</span>  <span class="syntax8">echo</span> <span class="syntax14">&quot;</span><span class="syntax14">&lt;</span><span class="syntax14">p</span><span class="syntax14">&gt;</span><span class="syntax14">You</span><span class="syntax14"> </span><span class="syntax14">are</span><span class="syntax14"> </span><span class="syntax14">going</span><span class="syntax14"> </span><span class="syntax14">to</span><span class="syntax14"> </span><span class="syntax14">be</span><span class="syntax14"> </span><span class="syntax14">redirected</span><span class="syntax14"> </span><span class="syntax14">to</span><span class="syntax14"> </span><span class="syntax14">a</span><span class="syntax14"> </span><span class="syntax14">new</span><span class="syntax14"> </span><span class="syntax14">page</span><span class="syntax14">!</span><span class="syntax14">&lt;</span><span class="syntax14">/</span><span class="syntax14">p</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">   4:</span>  <span class="syntax9">header</span><span class="syntax18">(</span><span class="syntax14">&quot;</span><span class="syntax14">Location</span><span class="syntax14">:</span><span class="syntax14"> </span><span class="syntax14">http</span><span class="syntax14">:</span><span class="syntax14">/</span><span class="syntax14">/</span><span class="syntax14">www</span><span class="syntax14">.</span><span class="syntax14">ellieq</span><span class="syntax14">.</span><span class="syntax14">com</span><span class="syntax14">&quot;</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutterH">   5:</span><span class="syntax17">?&gt;</span></span>
</PRE>
* After being redirected, a user's Back button will take the user where he or she was before the redirection page, not back to the redirection page itself.

h3. Using the Correct URI for Redirection

* The Location can be assigned the absolute URI of the redirection page such as the scheme, host name, and absolute path.
* Then the server will return a "redirect" header to the browser to retrieve the specified page directly.
<br /><pre>
Location: http://marakana.com/company.html
</pre>
* If you want to reference another file on your own server, you can output a partial URL, such as the following:
<br /><pre>
Location: /tutorial/PHP/index.html
</pre>
* You can make use of PHP's *@$_SERVER@* array variables to specify an absoute path. For example, the *@$_SERVER['HTTP_HOST']@* , the *@$_SERVER['PHP_SELF']@* , and the path of the the current script returned by the *@dirname()@* function can be concatenated together to make an absolute URL from a relative one.
* The following PHP code defines a header described in the PHP manual:
<br /><pre>
<?php
  header("Location: http://". $_SERVER['HTTP_HOST'] .
     dirname($_SERVER['PHP_SELF']) .
     "/my_newpage.php");
?>
</pre>
* If you are redirecting a user to a new Web site, it is also a good idea to let him or her know what is happening by adding a line such as "Our site has moved. You will automatically be redirected there."
* Filename: *redirect.html* (The HTML File)
<br /><PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;</span><span class="syntax17">html</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span> <span class="syntax17">&lt;</span><span class="syntax17">head</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span>  <span class="syntax17">&lt;</span><span class="syntax17">title</span><span class="syntax17">&gt;</span>Redirecting the User<span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">title</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span> <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">head</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span> <span class="syntax17">&lt;</span><span class="syntax17">body</span><span class="syntax17"> </span><span class="syntax17">bgcolor</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">#33ff33</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   6:</span>  <span class="syntax17">&lt;</span><span class="syntax17">form</span><span class="syntax17"> </span><span class="syntax17">action</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">http://localhost/demo166/unit08/redirect.php</span><span class="syntax13">&quot;</span>
<span class="gutter">   7:</span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17">method</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">post</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   8:</span>   <span class="syntax17">&lt;</span><span class="syntax17">b</span><span class="syntax17">&gt;</span>
<span class="gutter">   9:</span>   Select a search engine<span class="syntax17">&lt;</span><span class="syntax17">br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutterH">  10:</span>   <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">b</span><span class="syntax17">&gt;</span>
<span class="gutter">  11:</span>   <span class="syntax17">&lt;</span><span class="syntax17">select</span><span class="syntax17"> </span><span class="syntax17">name</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">new_url</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">  12:</span>      <span class="syntax17">&lt;</span><span class="syntax17">option</span><span class="syntax17"> </span><span class="syntax17">value</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">http://www.google.com</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>Google
<span class="gutter">  13:</span>      <span class="syntax17">&lt;</span><span class="syntax17">option</span><span class="syntax17"> </span><span class="syntax17">value</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">http://www.yahoo.com</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span> Yahoo!
<span class="gutter">  14:</span>      <span class="syntax17">&lt;</span><span class="syntax17">option</span><span class="syntax17"> </span><span class="syntax17">value</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">http://www.lycos.com</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span> Lycos
<span class="gutterH">  15:</span>      <span class="syntax17">&lt;</span><span class="syntax17">option</span><span class="syntax17"> </span><span class="syntax17">value</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">/index.php</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span> PHP Index
<span class="gutter">  16:</span>   <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">select</span><span class="syntax17">&gt;</span>
<span class="gutter">  17:</span>   <span class="syntax17">&lt;</span><span class="syntax17">input</span><span class="syntax17"> </span><span class="syntax17">type</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">submit</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">value</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13"> </span><span class="syntax13">Get</span><span class="syntax13"> </span><span class="syntax13">the</span><span class="syntax13"> </span><span class="syntax13">Web</span><span class="syntax13"> </span><span class="syntax13">Page!</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  18:</span>  <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">form</span><span class="syntax17">&gt;</span>
<span class="gutter">  19:</span> <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">body</span><span class="syntax17">&gt;</span>
<span class="gutterH">  20:</span><span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">html</span><span class="syntax17">&gt;</span></span>
</PRE>
* Filename: *redirect.php* (The PHP Script)
<br /><PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;?php</span>
<span class="gutter">   2:</span>  <span class="syntax8">if</span><span class="syntax18"> (</span><span class="syntax10">$</span><span class="syntax10">_POST</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">new_url</span><span class="syntax13">'</span><span class="syntax18">]</span> <span class="syntax18">=</span><span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">&quot;</span><span class="syntax18">)</span> <span class="syntax18">{</span>
<span class="gutter">   3:</span>    <span class="syntax8">exit</span><span class="syntax18">;</span>
<span class="gutter">   4:</span>  <span class="syntax18">}</span>
<span class="gutterH">   5:</span>  <span class="syntax8">else</span> <span class="syntax18">{</span>
<span class="gutter">   6:</span>    <span class="syntax9">header</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">Location:</span><span class="syntax13"> </span><span class="syntax13">'</span><span class="syntax18">.</span> <span class="syntax10">$</span><span class="syntax10">_POST</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">new_url</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">   7:</span>    <span class="syntax8">exit</span><span class="syntax18">;</span>
<span class="gutter">   8:</span>  <span class="syntax18">}</span>
<span class="gutter">   9:</span><span class="syntax17">?&gt;</span></span>
</PRE>
* The HTML form's action attribute is assigned the path to the PHP script that will handle the redirect once the form is submitted.
* The HTML select will give the user options to choose from.
* When the user clicks the submit button, the form information will be sent to the server and handled by the PHP script listed in the form's action attribute.
* If the user did not select anything, the value of *@$_POST['new_url']@* will be empty, and the script will exit.
* If the user selected one of the search engines in the menu, he or she will be directed to that Web site by the PHP *@header()@* function.
* The value of *@$_POST['new_url']@* is the address of the selected Web site; for example, http://www.lycos.com. Once the user is redirected, he or she can use the brower's Back button to go back to the page where the selection was made.

h3. Uploading Files

* In an HTML form, users can upload files from a browser to a Web server.
* The files might be text files, binary files (such as images or compressed files), spreadsheets, or other data.
* Being able to upload files is also useful if the information is easier to handle from a separate file, such as a registration form or a résumé.
* To upload files, you will need to create a form using the "file" type.

h3. Attributes for the *@<form>@* Tag and the file type

* To upload files the *@<form>@* tag requires three attributes:
## The action attribute of the *@<form>@* tag specifies the PHP script that will process the form.
## The enctype attribute determines how the form data is encoded by the browser. The default value is application/x-www-form-urlencoded, which is the default for almost any kind of form data.
<br />However, if you are going to upload files then you must specify that the data is of enctype multi-part/form-data. The browser encodes form data differently for application/x-www-form-urlencoded and multipart/form-data.
## The method attribute should be "POST".
* Filename: *upload.html* (Sample File Upload Form Values)
<br /><PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;</span><span class="syntax17">html</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span> <span class="syntax17">&lt;</span><span class="syntax17">head</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span>  <span class="syntax17">&lt;</span><span class="syntax17">title</span><span class="syntax17">&gt;</span>Uploading a file<span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">title</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span> <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">head</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span> <span class="syntax17">&lt;</span><span class="syntax17">body</span><span class="syntax17">&gt;</span>
<span class="gutter">   6:</span>  <span class="syntax17">&lt;</span><span class="syntax17">form</span><span class="syntax17"> </span><span class="syntax17">enctype</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">multipart/form-data</span><span class="syntax13">&quot;</span>
<span class="gutter">   7:</span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17">action</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">PHPscript.php</span><span class="syntax13">&quot;</span>
<span class="gutter">   8:</span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17">method</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">POST</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   9:</span><span class="syntax1">&lt;!--</span><span class="syntax1">MAX_FILE_SIZE</span><span class="syntax1"> </span><span class="syntax1">is</span><span class="syntax1"> </span><span class="syntax1">optional</span><span class="syntax1"> </span><span class="syntax1">and</span><span class="syntax1"> </span><span class="syntax1">must</span><span class="syntax1"> </span><span class="syntax1">precede</span><span class="syntax1"> </span><span class="syntax1">the</span><span class="syntax1"> </span><span class="syntax1">file</span><span class="syntax1"> </span><span class="syntax1">input</span><span class="syntax1"> </span><span class="syntax1">field</span><span class="syntax1">--&gt;</span>
<span class="gutterH">  10:</span>   <span class="syntax17">&lt;</span><span class="syntax17">input</span><span class="syntax17"> </span><span class="syntax17">type</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">hidden</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">name</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">MAX_FILE_SIZE</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">value</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">30000</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  11:</span>   Choose a file to upload: <span class="syntax17">&lt;</span><span class="syntax17">input</span><span class="syntax17"> </span><span class="syntax17">name</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">uploadfile</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">type</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">file</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  12:</span>   <span class="syntax17">&lt;</span><span class="syntax17">input</span><span class="syntax17"> </span><span class="syntax17">type</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">submit</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">value</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">Send</span><span class="syntax13"> </span><span class="syntax13">File</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  13:</span>  <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">form</span><span class="syntax17">&gt;</span>
<span class="gutter">  14:</span> <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">body</span><span class="syntax17">&gt;</span>
<span class="gutterH">  15:</span><span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">html</span><span class="syntax17">&gt;</span></span>
</PRE>
* In addition to the three attributes, the form's input type is "file"; for example:
<br /><pre>
<input type="file" name="uploadfile">
</pre>
* With an input type of type "file", the browser might show a display of (previously selected) file names, and a Browse button or selection method.
* Selecting the Browse button would cause the browser to enter into a file selection mode, allowing you to select from a list of files from different directories or folders.
* You can also specify the MAX_FILE_SIZE field size, the maximum number of bytes that will be accepted, but this only advises what size the file should be.
* This cannot be larger than upload_max_filesize defined in the php.ini file (default 2MB). Note also that this hidden field must precede the file input field in the HTML.
* Files will, by default, be stored in the server's default temporary directory, unless another location has been given with the upload_tmp_dir directive in php.ini.
* You can use the built-in function *@move_uploaded_file()@* to store an uploaded file somewhere permanently.
* From the php.ini file:
<br /><pre>
; File Uploads ;
;;;;;;;;;;;;;;;;

; Whether to allow HTTP file uploads.
file_uploads = On

; Temporary directory for HTTP uploaded files (will use system default if not
; specified).
upload_tmp_dir = "c:/wamp/tmp"

; Maximum allowed size for uploaded files.
upload_max_filesize = 2M
</pre>

h3. PHP's *@$_FILES@* Array

* When the file is sent to the server, PHP stores all the uploaded file information in the *@$_FILES@* superglobal array, a two-dimensional array that contains the name of the file input field as the first index and one of the attributes of the file type as the second index.
* Table: The *@$_FILES@* Superglobal Array

table{text-align:left; margin-left: 4em;}.
|{background:#ccc}.*Array*|{background:#ccc}.*Description*|
|*@$_FILES['userfile']['name']@*      |The original name of the file on the client machine.                                                 |
|*@$_FILES['userfile']['type']@*      |The MIME type of the file, if the browser provided this information. An example would be "image/gif".|
|*@$_FILES['userfile']['size']@*      |The size, in bytes, of the uploaded file.                                                            |
|*@$_FILES['userfile']['tmp_name']@*  |The temporary filename of the file in which the uploaded file was stored on the server.              |
|*@$_FILES['userfile']['error']@*     |The error code associated with this file upload. ['error'] was added in PHP 4.2.0.                   |

* Filename: *uploadFile.html* (The HTML File)
<br /><PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;</span><span class="syntax17">html</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span> <span class="syntax17">&lt;</span><span class="syntax17">head</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span>  <span class="syntax17">&lt;</span><span class="syntax17">title</span><span class="syntax17">&gt;</span>Uploading Files<span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">title</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span> <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">head</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span> <span class="syntax17">&lt;</span><span class="syntax17">body</span><span class="syntax17"> </span><span class="syntax17">bgcolor</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">lavender</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   6:</span>  <span class="syntax17">&lt;</span><span class="syntax17">h3</span><span class="syntax17">&gt;</span>Uploading Files<span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">h3</span><span class="syntax17">&gt;</span>
<span class="gutter">   7:</span>  <span class="syntax17">&lt;</span><span class="syntax17">form</span>
<span class="gutter">   8:</span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17">enctype</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">multipart/form-data</span><span class="syntax13">&quot;</span>
<span class="gutter">   9:</span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17">action</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">uploadFile.php</span><span class="syntax13">&quot;</span>
<span class="gutterH">  10:</span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17">method</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">post</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">  11:</span>   Type the name of the file to upload: <span class="syntax17">&lt;</span><span class="syntax17">br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  12:</span>   <span class="syntax17">&lt;</span><span class="syntax17">input</span><span class="syntax17"> </span><span class="syntax17">name</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">user_file</span><span class="syntax13">&quot;</span>
<span class="gutter">  13:</span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17">type</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">file</span><span class="syntax13">&quot;</span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  14:</span>   <span class="syntax17">&lt;</span><span class="syntax17">br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutterH">  15:</span>   <span class="syntax17">&lt;</span><span class="syntax17">input</span><span class="syntax17"> </span><span class="syntax17">type</span><span class="syntax18">=</span><span class="syntax17">submit</span><span class="syntax17"> </span><span class="syntax17">value</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">Get</span><span class="syntax13"> </span><span class="syntax13">File</span><span class="syntax13">&quot;</span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  16:</span>  <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">form</span><span class="syntax17">&gt;</span>
<span class="gutter">  17:</span> <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">body</span><span class="syntax17">&gt;</span>
<span class="gutter">  18:</span><span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">html</span><span class="syntax17">&gt;</span></span>
</PRE>
* Filename: *uploadFile.php* (The PHP Script)
<br /><PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;?php</span>
<span class="gutter">   2:</span>  <span class="syntax10">$</span><span class="syntax10">handle</span> <span class="syntax18">=</span> <span class="syntax9">fopen</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">_FILES</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">user_file</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">tmp_name</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">,</span><span class="syntax13">'</span><span class="syntax13">r</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">   3:</span>  <span class="syntax8">while</span><span class="syntax18">(</span><span class="syntax18">!</span><span class="syntax9">feof</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">handle</span><span class="syntax18">)</span><span class="syntax18">)</span> <span class="syntax18">{</span>
<span class="gutter">   4:</span>    <span class="syntax10">$</span><span class="syntax10">text</span> <span class="syntax18">=</span> <span class="syntax9">fgets</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">handle</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutterH">   5:</span>    <span class="syntax8">echo</span> <span class="syntax10">$</span><span class="syntax10">text</span><span class="syntax18">,</span><span class="syntax13">'</span><span class="syntax13">&lt;br</span><span class="syntax13"> </span><span class="syntax13">/&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">   6:</span>  <span class="syntax18">}</span>
<span class="gutter">   7:</span><span class="syntax17">?&gt;</span></span>
</PRE>
* The attribute to the form type is enctype and assigned "multipart/form-data". This encoding type is used to send data from files.
* Uploaded files must be sent via the POST method.
* The input field is of type "file" and will be assigned the name "user_file". The name is how the uploaded file will be identified in the PHP file, not the real name of the file.
* The *@$_FILES['user_file']['tmp_name']@* array holds the name of the temporary file that PHP gave to the uploaded file.
* The *@fopen()@* function will open that file for reading and return a filehandle that allows access to the file.

h3. Moving the Uploaded File

* PHP provides the *@move_uploaded_file()@* function to move an uploaded file to a new location.
* Format:
<br /><pre>
bool move_uploaded_file ( string filename, string destination )
</pre>
* This function checks to ensure that the file designated by filename is a valid upload file (meaning that it was uploaded using the POST method).
* If the file is valid, it will be moved to the filename given as a destination.
* If the filename is not a valid upload file, then no action will occur, and *@move_uploaded_file()@* function will return FALSE with a warning.
* Filename: *uploadPicture.html* (The HTML File)
<br /><PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;</span><span class="syntax17">html</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span> <span class="syntax17">&lt;</span><span class="syntax17">head</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span>  <span class="syntax17">&lt;</span><span class="syntax17">title</span><span class="syntax17">&gt;</span>Uploading Pictures<span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">title</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span> <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">head</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span> <span class="syntax17">&lt;</span><span class="syntax17">body</span><span class="syntax17"> </span><span class="syntax17">bgcolor</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">lavender</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   6:</span>  <span class="syntax17">&lt;</span><span class="syntax17">h3</span><span class="syntax17">&gt;</span>Uploading Files<span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">h3</span><span class="syntax17">&gt;</span>
<span class="gutter">   7:</span>  <span class="syntax17">&lt;</span><span class="syntax17">form</span>
<span class="gutter">   8:</span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17">enctype</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">multipart/form-data</span><span class="syntax13">&quot;</span>
<span class="gutter">   9:</span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17">action</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">uploadPicture.php</span><span class="syntax13">&quot;</span>
<span class="gutterH">  10:</span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17">method</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">post</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">  11:</span>   Browse and select the picture you want to upload: <span class="syntax17">&lt;</span><span class="syntax17">br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  12:</span>   <span class="syntax17">&lt;</span><span class="syntax17">input</span><span class="syntax17"> </span><span class="syntax17">name</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">picture_file</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">type</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">file</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  13:</span>   <span class="syntax17">&lt;</span><span class="syntax17">br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  14:</span>   <span class="syntax17">&lt;</span><span class="syntax17">input</span><span class="syntax17"> </span><span class="syntax17">type</span><span class="syntax18">=</span><span class="syntax17">submit</span><span class="syntax17"> </span><span class="syntax17">value</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">Get</span><span class="syntax13"> </span><span class="syntax13">File</span><span class="syntax13">&quot;</span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutterH">  15:</span>  <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">form</span><span class="syntax17">&gt;</span>
<span class="gutter">  16:</span> <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">body</span><span class="syntax17">&gt;</span>
<span class="gutter">  17:</span><span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">html</span><span class="syntax17">&gt;</span></span>
</PRE>
* Filename: *uploadPicture.php* (The PHP Script)
<br /><PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;html</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span> <span class="syntax17">&lt;head</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span>  <span class="syntax17">&lt;title</span><span class="syntax17">&gt;</span>File Uploads<span class="syntax17">&lt;/title</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span> <span class="syntax17">&lt;/head</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span> <span class="syntax17">&lt;body</span><span class="syntax17"> </span><span class="syntax17">bgcolor</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">#</span><span class="syntax14">33ff33</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   6:</span>  <span class="syntax17">&lt;font</span><span class="syntax17"> </span><span class="syntax17">face</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">verdana</span><span class="syntax14">&quot;</span><span class="syntax17"> </span><span class="syntax17">size</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">+</span><span class="syntax14">1</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   7:</span>  <span class="syntax17">&lt;?php</span>
<span class="gutter">   8:</span>    <span class="syntax8">echo</span> <span class="syntax13">'</span><span class="syntax13">The</span><span class="syntax13"> </span><span class="syntax13">uploaded</span><span class="syntax13"> </span><span class="syntax13">file</span><span class="syntax13"> </span><span class="syntax13">is:</span><span class="syntax13"> </span><span class="syntax13">'</span><span class="syntax18">,</span>
<span class="gutter">   9:</span>         <span class="syntax10">$</span><span class="syntax10">_FILES</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">picture_file</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">tmp_name</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">,</span><span class="syntax13">'</span><span class="syntax13">&lt;br</span><span class="syntax13"> </span><span class="syntax13">/&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutterH">  10:</span>    <span class="syntax10">$</span><span class="syntax10">filename</span> <span class="syntax18">=</span> <span class="syntax10">$</span><span class="syntax10">_FILES</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">picture_file</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">name</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">;</span>
<span class="gutter">  11:</span>    <span class="syntax10">$</span><span class="syntax10">filesize</span> <span class="syntax18">=</span> <span class="syntax10">$</span><span class="syntax10">_FILES</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">picture_file</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">size</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">;</span>
<span class="gutter">  12:</span>    <span class="syntax10">$</span><span class="syntax10">directory</span> <span class="syntax18">=</span> <span class="syntax13">'</span><span class="syntax13">/Library/WebServer/Documents/pictures/</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">  13:</span>    <span class="syntax10">$</span><span class="syntax10">uploadFile</span> <span class="syntax18">=</span> <span class="syntax10">$</span><span class="syntax10">directory</span> <span class="syntax18">.</span> <span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax18">;</span>
<span class="gutter">  14:</span>    <span class="syntax8">echo</span> <span class="syntax14">&quot;</span><span class="syntax14">The</span><span class="syntax14"> </span><span class="syntax14">moved</span><span class="syntax14"> </span><span class="syntax14">file</span><span class="syntax14"> </span><span class="syntax14">is</span><span class="syntax14">:</span><span class="syntax14"> </span><span class="syntax10">$</span><span class="syntax10">uploadFile</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutterH">  15:</span>    <span class="syntax8">if</span><span class="syntax18"> (</span><span class="syntax9">move_uploaded_file</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">_FILES</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">picture_file</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">tmp_name</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">,</span>
<span class="gutter">  16:</span>                           <span class="syntax10">$</span><span class="syntax10">uploadFile</span><span class="syntax18">)</span><span class="syntax18">)</span> <span class="syntax18">{</span>
<span class="gutter">  17:</span>      <span class="syntax8">echo</span> <span class="syntax13">'</span><span class="syntax13">The</span><span class="syntax13"> </span><span class="syntax13">file</span><span class="syntax13"> </span><span class="syntax13">is</span><span class="syntax13"> </span><span class="syntax13">valid</span><span class="syntax13"> </span><span class="syntax13">and</span><span class="syntax13"> </span><span class="syntax13">was</span><span class="syntax13"> </span><span class="syntax13">successfully</span><span class="syntax13"> </span><span class="syntax13">uploaded.</span>
<span class="gutter">  18:</span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13">&lt;br</span><span class="syntax13"> </span><span class="syntax13">/&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">  19:</span>      <span class="syntax8">echo</span> <span class="syntax14">&quot;</span><span class="syntax14">The</span><span class="syntax14"> </span><span class="syntax14">image</span><span class="syntax14"> </span><span class="syntax14">file</span><span class="syntax14">,</span><span class="syntax14"> </span><span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax14">,</span><span class="syntax14"> </span><span class="syntax14">is</span><span class="syntax14"> </span><span class="syntax10">$</span><span class="syntax10">filesize</span><span class="syntax14"> </span><span class="syntax14">bytes</span><span class="syntax14">.</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutterH">  20:</span>    <span class="syntax18">}</span>
<span class="gutter">  21:</span>  <span class="syntax17">?&gt;</span>
<span class="gutter">  22:</span>  <span class="syntax17">&lt;center</span><span class="syntax17">&gt;</span>
<span class="gutter">  23:</span>  <span class="syntax17">&lt;br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  24:</span>  <span class="syntax17">&lt;img</span><span class="syntax17"> </span><span class="syntax17">src</span><span class="syntax18">=</span><span class="syntax17">&lt;?php</span> <span class="syntax8">echo</span> <span class="syntax13">'</span><span class="syntax13">http://localhost/pictures/</span><span class="syntax13">'</span> <span class="syntax18">.</span> <span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax18">;</span> <span class="syntax17">?&gt;</span>
<span class="gutterH">  25:</span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17">width</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">250</span><span class="syntax14">&quot;</span><span class="syntax17"> </span><span class="syntax17">height</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">175</span><span class="syntax14">&quot;</span><span class="syntax17"> </span><span class="syntax17">border</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">3</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">  26:</span>  <span class="syntax17">&lt;/center</span><span class="syntax17">&gt;</span>
<span class="gutter">  27:</span>  <span class="syntax17">&lt;/font</span><span class="syntax17">&gt;</span>
<span class="gutter">  28:</span> <span class="syntax17">&lt;/body</span><span class="syntax17">&gt;</span>
<span class="gutter">  29:</span><span class="syntax17">&lt;/html</span><span class="syntax17">&gt;</span></span>
</PRE>
* To upload files the encoding type must be "multipart/form-data" and the method, POST.
* The uploaded file must be of type "file". Its name is "picture_file", the name used to identify the file in the *@$_FILES[ ]@* associative array.
* The variable *@$uploadFile@* contains the directory and filename to where the picture will be moved.
* The *@move_uploaded_file()@* function moves the uploaded file to its new location. Its first argument is the original file and its second argument is the destination.

h3. Sticky Forms

* A "sticky" form is a form that remembers the values you typed in the input fields.
* A typical example is when you fill out a form to purchase some products or fill out a registration form and you left out a field or typed the credit card information wrong.
* When you submit the order, the page comes back with the form and tells you what you did wrong and asks you to resubmit the order. If the order form is long and contains lots of boxes, how many times would you resubmit it, if you had to start all over again?
* With a sticky form, the input data can be saved so that when the form is redisplayed, the data is still there.
* The following example checks if the user left any fields empty and if he or she did, redisplays the form with an error showing what fields need to filled. The fields that had data in them still contain the data.
* Filename: *stickyForm.php*
<br /><PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;html</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span> <span class="syntax17">&lt;head</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span>  <span class="syntax17">&lt;title</span><span class="syntax17">&gt;</span>Empty Fields<span class="syntax17">&lt;/title</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span> <span class="syntax17">&lt;/head</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span> <span class="syntax17">&lt;body</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;div</span><span class="syntax17"> </span><span class="syntax17">align</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">center</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   6:</span>  <span class="syntax17">&lt;h2</span><span class="syntax17">&gt;</span>Validating Input<span class="syntax17">&lt;/h2</span><span class="syntax17">&gt;</span>
<span class="gutter">   7:</span>  <span class="syntax17">&lt;?php</span>
<span class="gutter">   8:</span>    <span class="syntax10">$</span><span class="syntax10">errors</span> <span class="syntax18">=</span> <span class="syntax8">array</span><span class="syntax18">(</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">   9:</span>    <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">If</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">form</span><span class="syntax2"> </span><span class="syntax2">was</span><span class="syntax2"> </span><span class="syntax2">submitted</span>
<span class="gutterH">  10:</span>    <span class="syntax8">if</span><span class="syntax18"> (</span><span class="syntax8">isset</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">_REQUEST</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">submit</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">)</span><span class="syntax18">)</span> <span class="syntax18">{</span>
<span class="gutter">  11:</span>      <span class="syntax6">validate_input</span><span class="syntax18">(</span><span class="syntax18">)</span><span class="syntax18">;</span> <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">Check</span><span class="syntax2"> </span><span class="syntax2">for</span><span class="syntax2"> </span><span class="syntax2">empty</span><span class="syntax2"> </span><span class="syntax2">fields</span>
<span class="gutter">  12:</span>      <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">If</span><span class="syntax2"> </span><span class="syntax2">there</span><span class="syntax2"> </span><span class="syntax2">are</span><span class="syntax2"> </span><span class="syntax2">errors</span><span class="syntax2"> </span><span class="syntax2">redisplay</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">form</span>
<span class="gutter">  13:</span>      <span class="syntax8">if</span><span class="syntax18"> (</span><span class="syntax9">count</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">errors</span><span class="syntax18">)</span> <span class="syntax18">&gt;</span> <span class="syntax5">0</span><span class="syntax18">)</span> <span class="syntax18">{</span>
<span class="gutter">  14:</span>        <span class="syntax6">display_form</span><span class="syntax18">(</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutterH">  15:</span>      <span class="syntax18">}</span>
<span class="gutter">  16:</span>      <span class="syntax8">else</span> <span class="syntax18">{</span>
<span class="gutter">  17:</span>        <span class="syntax8">echo</span> <span class="syntax13">'</span><span class="syntax13">&lt;b&gt;OK!</span><span class="syntax13"> </span><span class="syntax13">Go</span><span class="syntax13"> </span><span class="syntax13">ahead</span><span class="syntax13"> </span><span class="syntax13">and</span><span class="syntax13"> </span><span class="syntax13">Process</span><span class="syntax13"> </span><span class="syntax13">the</span><span class="syntax13"> </span><span class="syntax13">form!</span>
<span class="gutter">  18:</span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13">&lt;/b&gt;&lt;br</span><span class="syntax13"> </span><span class="syntax13">/&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span> <span class="syntax18">}</span>
<span class="gutter">  19:</span>      <span class="syntax18">}</span>
<span class="gutterH">  20:</span>      <span class="syntax8">else</span> <span class="syntax18">{</span>
<span class="gutter">  21:</span>        <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">Display</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">form</span><span class="syntax2"> </span><span class="syntax2">for</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">first</span><span class="syntax2"> </span><span class="syntax2">time</span>
<span class="gutter">  22:</span>        <span class="syntax6">display_form</span><span class="syntax18">(</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  23:</span>      <span class="syntax18">}</span>
<span class="gutter">  24:</span>      
<span class="gutterH">  25:</span>      <span class="syntax8">function</span> <span class="syntax6">validate_input</span><span class="syntax18">(</span><span class="syntax18">)</span> <span class="syntax18">{</span>
<span class="gutter">  26:</span>        <span class="syntax8">global</span> <span class="syntax10">$</span><span class="syntax10">errors</span><span class="syntax18">;</span>
<span class="gutter">  27:</span>        <span class="syntax8">if</span><span class="syntax18"> (</span><span class="syntax10">$</span><span class="syntax10">_POST</span><span class="syntax18">[</span><span class="syntax14">&quot;</span><span class="syntax14">name</span><span class="syntax14">&quot;</span><span class="syntax18">]</span> <span class="syntax18">=</span><span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">&quot;</span><span class="syntax18">)</span> <span class="syntax18">{</span>
<span class="gutter">  28:</span>          <span class="syntax10">$</span><span class="syntax10">errors</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">name</span><span class="syntax13">'</span><span class="syntax18">]</span> <span class="syntax18">=</span> 
<span class="gutter">  29:</span>            <span class="syntax14">&quot;</span><span class="syntax14">&lt;</span><span class="syntax14">font</span><span class="syntax14"> </span><span class="syntax14">color</span><span class="syntax14">=</span><span class="syntax14">'</span><span class="syntax14">red</span><span class="syntax14">'</span><span class="syntax14">&gt;</span><span class="syntax14">*</span><span class="syntax14">*</span><span class="syntax14">*</span><span class="syntax14">Your</span><span class="syntax14"> </span><span class="syntax14">name</span><span class="syntax14">?</span><span class="syntax14">*</span><span class="syntax14">*</span><span class="syntax14">*</span><span class="syntax14">&lt;</span><span class="syntax14">/</span><span class="syntax14">font</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutterH">  30:</span>        <span class="syntax18">}</span>
<span class="gutter">  31:</span>        <span class="syntax8">if</span><span class="syntax18"> (</span><span class="syntax10">$</span><span class="syntax10">_POST</span><span class="syntax18">[</span><span class="syntax14">&quot;</span><span class="syntax14">phone</span><span class="syntax14">&quot;</span><span class="syntax18">]</span> <span class="syntax18">=</span><span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">&quot;</span><span class="syntax18">)</span> <span class="syntax18">{</span>
<span class="gutter">  32:</span>          <span class="syntax10">$</span><span class="syntax10">errors</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">phone</span><span class="syntax13">'</span><span class="syntax18">]</span> <span class="syntax18">=</span>
<span class="gutter">  33:</span>            <span class="syntax14">&quot;</span><span class="syntax14">&lt;</span><span class="syntax14">font</span><span class="syntax14"> </span><span class="syntax14">color</span><span class="syntax14">=</span><span class="syntax14">'</span><span class="syntax14">red</span><span class="syntax14">'</span><span class="syntax14">&gt;</span><span class="syntax14">*</span><span class="syntax14">*</span><span class="syntax14">*</span><span class="syntax14">Your</span><span class="syntax14"> </span><span class="syntax14">phone</span><span class="syntax14">?</span><span class="syntax14">*</span><span class="syntax14">*</span><span class="syntax14">*</span><span class="syntax14">&lt;</span><span class="syntax14">/</span><span class="syntax14">font</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  34:</span>        <span class="syntax18">}</span>
<span class="gutterH">  35:</span>      <span class="syntax18">}</span>
<span class="gutter">  36:</span>      <span class="syntax8">function</span> <span class="syntax6">display_form</span><span class="syntax18">(</span><span class="syntax18">)</span> <span class="syntax18">{</span>
<span class="gutter">  37:</span>        <span class="syntax8">global</span> <span class="syntax10">$</span><span class="syntax10">errors</span><span class="syntax18">;</span>
<span class="gutter">  38:</span>  <span class="syntax17">?&gt;</span>
<span class="gutter">  39:</span>  <span class="syntax17">&lt;b</span><span class="syntax17">&gt;</span>
<span class="gutterH">  40:</span>  <span class="syntax17">&lt;form</span><span class="syntax17"> </span><span class="syntax17">method</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">post</span><span class="syntax14">&quot;</span>
<span class="gutter">  41:</span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17">action</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax17">&lt;?php</span> <span class="syntax8">echo</span> <span class="syntax10">$</span><span class="syntax10">_SERVER</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">PHP_SELF</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">;</span> <span class="syntax17">?&gt;</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">  42:</span>   What is your name?<span class="syntax17">&lt;br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  43:</span>   <span class="syntax17">&lt;input</span><span class="syntax17"> </span><span class="syntax17">type</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">text</span><span class="syntax14">&quot;</span><span class="syntax17"> </span><span class="syntax17">name</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">name</span><span class="syntax14">&quot;</span>
<span class="gutter">  44:</span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17">value</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax17">&lt;?php</span> <span class="syntax8">if</span><span class="syntax18"> (</span><span class="syntax18">@</span><span class="syntax10">$</span><span class="syntax10">_POST</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">name</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">)</span> <span class="syntax8">echo</span> <span class="syntax10">$</span><span class="syntax10">_POST</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">name</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">;</span> <span class="syntax17">?&gt;</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutterH">  45:</span>   <span class="syntax17">&lt;br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  46:</span>   <span class="syntax17">&lt;?php</span> <span class="syntax8">if</span><span class="syntax18"> (</span><span class="syntax18">@</span><span class="syntax10">$</span><span class="syntax10">errors</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">name</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">)</span> <span class="syntax8">echo</span> <span class="syntax10">$</span><span class="syntax10">errors</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">name</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">;</span> <span class="syntax17">?&gt;</span>
<span class="gutter">  47:</span>   <span class="syntax17">&lt;br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  48:</span>   What is your phone number?<span class="syntax17">&lt;br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  49:</span>   <span class="syntax17">&lt;input</span><span class="syntax17"> </span><span class="syntax17">type</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">text</span><span class="syntax14">&quot;</span><span class="syntax17"> </span><span class="syntax17">name</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">phone</span><span class="syntax14">&quot;</span>
<span class="gutterH">  50:</span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17">value</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax17">&lt;?php</span> <span class="syntax8">if</span><span class="syntax18"> (</span><span class="syntax18">@</span><span class="syntax10">$</span><span class="syntax10">_POST</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">phone</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">)</span> <span class="syntax8">echo</span> <span class="syntax10">$</span><span class="syntax10">_POST</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">phone</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">;</span> <span class="syntax17">?&gt;</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">  51:</span>   <span class="syntax17">&lt;br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  52:</span>   <span class="syntax17">&lt;?php</span> <span class="syntax8">if</span><span class="syntax18"> (</span><span class="syntax18">@</span><span class="syntax10">$</span><span class="syntax10">errors</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">phone</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">)</span> <span class="syntax8">echo</span> <span class="syntax10">$</span><span class="syntax10">errors</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">phone</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">;</span> <span class="syntax17">?&gt;</span>
<span class="gutter">  53:</span>   <span class="syntax17">&lt;br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  54:</span>   <span class="syntax17">&lt;input</span><span class="syntax17"> </span><span class="syntax17">type</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">reset</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutterH">  55:</span>   <span class="syntax17">&lt;input</span><span class="syntax17"> </span><span class="syntax17">type</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">submit</span><span class="syntax14">&quot;</span><span class="syntax17"> </span><span class="syntax17">name</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">submit</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">  56:</span>   <span class="syntax17">&lt;br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  57:</span>  <span class="syntax17">&lt;form</span><span class="syntax17">&gt;</span>
<span class="gutter">  58:</span>  <span class="syntax17">&lt;?php</span>
<span class="gutter">  59:</span>    <span class="syntax18">}</span>
<span class="gutterH">  60:</span>  <span class="syntax17">?&gt;</span>
<span class="gutter">  61:</span>  <span class="syntax17">&lt;/b</span><span class="syntax17">&gt;</span>
<span class="gutter">  62:</span>  <span class="syntax17">&lt;/div</span><span class="syntax17">&gt;</span>
<span class="gutter">  63:</span> <span class="syntax17">&lt;/body</span><span class="syntax17">&gt;</span>
<span class="gutter">  64:</span><span class="syntax17">&lt;/html</span><span class="syntax17">&gt;</span></span>
</PRE>
* The *@$errors@* array is initialized. It will be used to build a string error message.
* If the *@isset()@* function on line 10 returns true, the user has already submitted the form.
* If the PHP *@count()@* function finds that the *@$errors@* array is not empty, the *@display_form()@* function is called and the same form is displayed again with the error messages displayed in red.
* If there are no errors, then the form will be processed. We do not do any real processing here, but if we did, this is where the code would go.
* *@validate_input()@* is a user-defined function that will determine whether or not the user filled in the required fields.
* When the input type is named, the value given to it will be empty the first time it is displayed because PHP has not yet processed the input.
* If the form has already been displayed and there was an error, then the value of the field, if there was one, will be assigned by switching over to PHP mode and using the value of *@$_POST['name']@*. This is what makes the form "sticky."
* If the user had typed his or her name, PHP would have put the value back in the text box, but if the user did not type his or her name, the value of *@$_POST['name']@* will be empty and nothing will be restored to the text box.
* If the user did not enter his or her name or phone in the text box fields, an error will be printed right below it. If the user did enter his or her name, the value in the *@$errors@* array element will be empty and nothing will be printed.

h3. Where to Get Information About Superglobal Arrays

* As we have seen throughout this chapter, PHP superglobal arrays (also called autoglobal), such as *@$_GET@* and *@$_POST@* are defined as part of the global namespace of your PHP script and used to store the user input coming from HTML forms.
* Other superglobals, such as the server's configuration, cookies, or information about the environment are also accessible in your PHP script in superglobal arrays.
* These predefined arrays are referred collectively as EGPCS (Environment, GET, POST, Cookie, and Server information). They are called superglobals because they are available in every part of your program.

h3. The *@phpinfo()@* Function

* To see the available predefined variables on your system, you can use the *@phpinfo()@* function that includes not only all of the EGPCS information, but a huge amount of information about PHP, such as version, operating system, environment, compilation options, server information, HTTP headers, and so on.
* The following table lists arguments used to customize the output of the *@phpinfo()@* function.
* You can use either the constant value in column 1 or the number value in column 2. Column 3 describes the output. In the following example *@phpinfo()@* displays the EGPCS predefined variables.
<br /><pre>
<?php
  // phpinfo(32) does the same thing
  phpinfo(INFO_VARIABLES);
?>
</pre>
* Table: *@phpinfo()@* Options

table{text-align:left; margin-left: 4em;}.
|{background:#ccc}.*Name_(Constant)*|{background:#ccc}.*Value*|{background:#ccc}.*Description*|
|INFO_GENERAL        |1      |The configuration line, php.ini location, build date, Web server, system, and more.|
|INFO_CREDITS        |2      |PHP credits. See also *@phpcredits()@*.                                                |
|INFO_CONFIGURATION  |4      |Current local and master values for PHP directives. See also *@ini_get()@*.            |
|INFO_MODULES        |8      |Loaded modules and their respective settings. See also *@get_loaded_extensions()@*.    |
|INFO_ENVIRONMENT    |16     |Environment variable information that is also available in *@$_ENV@*.                  |
|INFO_VARIABLES      |32     |Shows all predefined variables from EGPCS (Environment, GET, POST, Cookie, Server).|
|INFO_LICENSE        |64     |PHP License information. See also the license FAQ.                                 |
|INFO_ALL            |-1     |Shows all of the above. This is the default value.                                 |

* From: http://us2.php.net/phpinfo For a complete list and definitions see: http://us3.php.net/manual/en/reserved.variables.php

h3. How to Get Server Information

* We have been working with HTML forms and PHP, going back and forth between the server and browser.
* PHP makes information about your server available to your scripts. The Web server assigns values to the PHP superglobal *@$_SERVER@* array such as header, path, script locations, and version information.
* All servers are not consistent in the information they provide. The table below defines some of the superglobals (from the PHP manual) you will encounter in the following units.
* Table: Retrieving Server Information

table{text-align:left; margin-left: 4em;}.
|{background:#ccc}.*$_SERVER_Key*|{background:#ccc}.*Description_of_Value*|
|PHP_SELF           |The filename of the currently executing script, relative to the document root. For instance, *@$_SERVER['PHP_SELF']@* in a script at the address http://example.com/test.php/foo.bar would be /test.php/foo.bar. The __FILE__ constant contains the full path and filename of the current (i.e., included) file.|
|GATEWAY_INTERFACE  |The CGI specification the server is using (i.e., CGI/1.1).                                                                                                                                                                                                                                                  |
|SERVER_NAME        |The name of the server host under which the current script is executing. If the script is running on a virtual host, this will be the value defined for that virtual host.                                                                                                                                  |
|SERVER_SOFTWARE    |Server identification string, given in the headers when responding to requests.                                                                                                                                                                                                                             |
|SERVER_PROTOCOL    |Name and revision of the information protocol via which the page was requested (i.e., HTTP/1.0).                                                                                                                                                                                                            |
|REQUEST_METHOD     |Which request method was used to access the page (i.e., GET, HEAD, POST, PUT).                                                                                                                                                                                                                              |
|REQUEST_TIME       |The timestamp of the start of the request. Available since PHP 5.1.0.                                                                                                                                                                                                                                       |
|QUERY_STRING       |The query string, if any, via which the page was accessed.                                                                                                                                                                                                                                                  |
|DOCUMENT_ROOT      |The document root directory under which the current script is executing, as defined in the server's configuration file.                                                                                                                                                                                     |
|HTTP_ACCEPT        |Contents of the Accept: header from the current request, if there is one.                                                                                                                                                                                                                                   |
|HTTP_CONNECTION    |Contents of the Connection: header from the current request, if there is one. Example: Keep-Alive.                                                                                                                                                                                                          |
|HTTP_HOST          |Contents of the Host: header from the current request, if there is one.                                                                                                                                                                                                                                     |
|HTTP_REFERER       |The address of the page (if any) that referred the user agent to the current page. This is set by the user agent. Not all user agents will set this, and some provide the ability to modify HTTP_REFERER as a feature. In short, it cannot really be trusted. Contents of the User-Agent: header from the current request, if there is one.|
|HTTP_USER_AGENT    |A typical example is:<br />Mozilla/4.5 [en] (X11; U; Linux 2.2.9 i586)<br />See also the *@get_browser()@* function.|
|REMOTE_ADDR        |The IP address from which the user is viewing the current page.                                                                                                                                                                                                                                             |
|REMOTE_HOST        |The host name from which the user is viewing the current page. The reverse DNS lookup is based off the REMOTE_ADDR of the user.                                                                                                                                                                             |
|REMOTE_PORT        |The port being used on the user's machine to communicate with the Web server.                                                                                                                                                                                                                               |
|SCRIPT_FILENAME    |The absolute pathname of the currently executing script. Note: If a script is executed with the CLI, as a relative path, such as file.php or ../file.php, *@$_SERVER['SCRIPT_FILENAME']@* will contain the relative path specified by the user.                                                                 |
|SERVER_PORT        |The port on the server machine being used by the Web server for communication, default is port 80; using SSL is your defined secure HTTP port.                                                                                                                                                              |
|SERVER_SIGNATURE   |String containing the server version and virtual host name that are added to server-generated pages, if enabled.                                                                                                                                                                                            |
|PATH_TRANSLATED    |The path of the file system (not document root) related to the current script.                                                                                                                                                                                                                              |
|SCRIPT_NAME        |Contains the current script's path. This is useful for self-processing pages. The __FILE__ constant contains the full path and filename of the current (i.e., included) file.                                                                                                                               |
|REQUEST_URI        |The URI that was given to access this page; for instance, /index.html.                                                                                                                                                                                                                                      |

* The *@$_SERVER@* array (partial output).
* Filename: *serverInfo.php*
<br /><PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;html</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span> <span class="syntax17">&lt;head</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span>  <span class="syntax17">&lt;title</span><span class="syntax17">&gt;</span>Server Information<span class="syntax17">&lt;/title</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span> <span class="syntax17">&lt;/head</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span> <span class="syntax17">&lt;body</span><span class="syntax17"> </span><span class="syntax17">bgcolor</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">yellow</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   6:</span>  <span class="syntax17">&lt;table</span><span class="syntax17"> </span><span class="syntax17">border</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">1</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   7:</span>  <span class="syntax17">&lt;?php</span>
<span class="gutter">   8:</span>    <span class="syntax8">foreach</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">_SERVER</span> <span class="syntax8">as</span> <span class="syntax10">$</span><span class="syntax10">key</span><span class="syntax18">=</span><span class="syntax18">&gt;</span><span class="syntax10">$</span><span class="syntax10">value</span><span class="syntax18">)</span> <span class="syntax18">{</span>
<span class="gutter">   9:</span>      <span class="syntax8">echo</span> <span class="syntax13">'</span><span class="syntax13">&lt;tr&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutterH">  10:</span>      <span class="syntax8">echo</span> <span class="syntax14">&quot;</span><span class="syntax14">&lt;</span><span class="syntax14">td</span><span class="syntax14">&gt;</span><span class="syntax14">&lt;</span><span class="syntax14">b</span><span class="syntax14">&gt;</span><span class="syntax10">$</span><span class="syntax10">key</span><span class="syntax14">&lt;</span><span class="syntax14">/</span><span class="syntax14">td</span><span class="syntax14">&gt;</span><span class="syntax14">&lt;</span><span class="syntax14">td</span><span class="syntax14">&gt;</span><span class="syntax10">$</span><span class="syntax10">value</span><span class="syntax14">&lt;</span><span class="syntax14">/</span><span class="syntax14">td</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  11:</span>      <span class="syntax8">echo</span> <span class="syntax13">'</span><span class="syntax13">&lt;/tr&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">  12:</span>    <span class="syntax18">}</span>
<span class="gutter">  13:</span>  <span class="syntax17">?&gt;</span>
<span class="gutter">  14:</span>  <span class="syntax17">&lt;/table</span><span class="syntax17">&gt;</span>
<span class="gutterH">  15:</span> <span class="syntax17">&lt;/body</span><span class="syntax17">&gt;</span>
<span class="gutter">  16:</span><span class="syntax17">&lt;/html</span><span class="syntax17">&gt;</span></span>
</PRE>
* A partial output of the *@$_SERVER@* array is displayed in Figure 10.40.
* Filename: *serverInfo2.php*
<br /><PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;html</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span> <span class="syntax17">&lt;head</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span>  <span class="syntax17">&lt;title</span><span class="syntax17">&gt;</span>Server Info<span class="syntax17">&lt;/title</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span> <span class="syntax17">&lt;/head</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span> <span class="syntax17">&lt;body</span><span class="syntax17"> </span><span class="syntax17">bgcolor</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">silver</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   6:</span>  <span class="syntax17">&lt;font</span><span class="syntax17"> </span><span class="syntax17">face</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">verdana</span><span class="syntax14">&quot;</span><span class="syntax17"> </span><span class="syntax17">size</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">+</span><span class="syntax14">1</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   7:</span>  <span class="syntax17">&lt;?php</span>
<span class="gutter">   8:</span>    <span class="syntax8">echo</span> <span class="syntax14">&quot;</span><span class="syntax14">My</span><span class="syntax14"> </span><span class="syntax14">server</span><span class="syntax14"> </span><span class="syntax14">is</span><span class="syntax14"> </span><span class="syntax14">\&quot;</span><span class="syntax14">&quot;</span><span class="syntax18">,</span> <span class="syntax10">$</span><span class="syntax10">_SERVER</span><span class="syntax18">[</span><span class="syntax14">&quot;</span><span class="syntax14">SERVER_NAME</span><span class="syntax14">&quot;</span><span class="syntax18">]</span><span class="syntax18">,</span> <span class="syntax14">&quot;</span><span class="syntax14">\&quot;</span><span class="syntax14">.</span><span class="syntax14">\n</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">   9:</span>    <span class="syntax8">echo</span> <span class="syntax14">&quot;</span><span class="syntax14">The</span><span class="syntax14"> </span><span class="syntax14">server</span><span class="syntax14">'</span><span class="syntax14">s</span><span class="syntax14"> </span><span class="syntax14">IP</span><span class="syntax14"> </span><span class="syntax14">address</span><span class="syntax14"> </span><span class="syntax14">is</span><span class="syntax14"> </span><span class="syntax14">\&quot;</span><span class="syntax14">&quot;</span><span class="syntax18">,</span> <span class="syntax10">$</span><span class="syntax10">_SERVER</span><span class="syntax18">[</span><span class="syntax14">&quot;</span><span class="syntax14">REMOTE_ADDR</span><span class="syntax14">&quot;</span><span class="syntax18">]</span><span class="syntax18">,</span>
<span class="gutterH">  10:</span>         <span class="syntax14">&quot;</span><span class="syntax14">\&quot;</span><span class="syntax14">.</span><span class="syntax14">\n</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  11:</span>    <span class="syntax8">echo</span> <span class="syntax14">&quot;</span><span class="syntax14">My</span><span class="syntax14"> </span><span class="syntax14">browser</span><span class="syntax14"> </span><span class="syntax14">is</span><span class="syntax14"> </span><span class="syntax14">\&quot;</span><span class="syntax14">&quot;</span><span class="syntax18">,</span> <span class="syntax10">$</span><span class="syntax10">_SERVER</span><span class="syntax18">[</span><span class="syntax14">&quot;</span><span class="syntax14">HTTP_USER_AGENT</span><span class="syntax14">&quot;</span><span class="syntax18">]</span><span class="syntax18">,</span>
<span class="gutter">  12:</span>         <span class="syntax14">&quot;</span><span class="syntax14">\&quot;</span><span class="syntax14">.</span><span class="syntax14">\n</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  13:</span>    <span class="syntax8">echo</span> <span class="syntax14">&quot;</span><span class="syntax14">The</span><span class="syntax14"> </span><span class="syntax14">PHP</span><span class="syntax14"> </span><span class="syntax14">script</span><span class="syntax14"> </span><span class="syntax14">being</span><span class="syntax14"> </span><span class="syntax14">executed</span><span class="syntax14"> </span><span class="syntax14">is</span><span class="syntax14"> </span><span class="syntax14">\&quot;</span><span class="syntax14">&quot;</span><span class="syntax18">,</span>
<span class="gutter">  14:</span>          <span class="syntax10">$</span><span class="syntax10">_SERVER</span><span class="syntax18">[</span><span class="syntax14">&quot;</span><span class="syntax14">PHP_SELF</span><span class="syntax14">&quot;</span><span class="syntax18">]</span><span class="syntax18">,</span> <span class="syntax14">&quot;</span><span class="syntax14">\&quot;</span><span class="syntax14">.</span><span class="syntax14">\n</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutterH">  15:</span>  <span class="syntax17">?&gt;</span>
<span class="gutter">  16:</span> <span class="syntax17">&lt;/body</span><span class="syntax17">&gt;</span>
<span class="gutter">  17:</span><span class="syntax17">&lt;/html</span><span class="syntax17">&gt;</span></span>
</PRE>
* The default name for the server on the local computer is "localhost".
* The IP address for the server referred to as "localhost" is displayed. This address can be used by TCP/IP applications.
* The HTTP_USER_AGENT refers to the browser ID or user-agent string identifying the browser that is sending the request.
* In an HTTP transaction, this information is sent by the server to the browser as a header followed by a blank line.
* *@$_SERVER["PHP_SELF"]@* is the filename of the currently executing script, relative to the document root. This variable is useful in creating self-processing forms.

h3. How to Get Information About the Environment

* The environment variables are predefined variables containing information about the operating system, shell, path, CGI variables, and computer under which PHP is running.
* If PHP is running as a CGI program, then the environment variables are used to pass data about the information request from the server to the script. The environment variables are set when the server executes the gateway program.
* The *@$_ENV@* array contains the environment variables that can also be displayed with the *@phpinfo()@* built-in function.
* To access the name of the remote host, you would use the following syntax:
<br /><pre>
echo $_ENV['REMOTE_HOST'];
</pre>
* or you can use the PHP *@getenv()@* function to get the value of an environment variable:
<br /><pre>
echo getenv('REMOTE_HOST');
</pre>
* The output will vary from one system to another because there are a number of shells, different servers, and so on.
* For example, you might be running PHP in the Apache server on a Solaris operating system using the Bash shell while I'm using Redhat Linux and the TCshell. The variations can be enormous, resulting in enormous variations in output.
<br /><pre>
<?php
  // Display information about PHP environment
  phpinfo(16);
?>
</pre>

<br />

---

[[Unit Eight => 152-166 Unit Eight Index]]
