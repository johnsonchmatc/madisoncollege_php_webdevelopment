<!DOCTYPE html PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html>
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org">
<title>More Files and Directories</title>
<link href="../../../css/basic.css" rel="stylesheet" type="text/css">
<script type="text/javascript" language="JavaScript">
<!--
function putSemester() {
    var today=new Date();
    var thisMonth=today.getMonth()+1;
    var thisYear=today.getFullYear();
    if(thisMonth <=6) {
        return "Spring, " + thisYear;
    }
    else {
       return "Fall, " + thisYear;
    }
}//-->
</script>
<style type="text/css">
<!--
    .bgStripes {
        background-image:url(../../../images/Xstripes.gif);
        background-attachment: fixed;
    }
    body {
        background-color:white;
    }
    strong {
        font-family: Arial, Helvetica, sans-serif;
    }
-->
</style>
</head>
<body style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">
<table class="bgStripes" border="0" width="100%">
<tbody>
<tr name="firstRow">
<td valign="top" width="80"><span style="font-size: x-small; font-weight: bold;">
<script type="text/javascript">
<!--
    document.write(putSemester());
-->
</script>
</span> <br>
</td>
<td style="text-align: center;"><span style="font-weight: bold; font-size: medium; color: darkblue;">
PHP Web Development with MySQL
</span> </td>
<td align="right" valign="top" width="80"><span style="font-size: x-small; font-weight: bold;">
3 Credits</span> </td>
</tr>
<tr>
<td colspan="3" style="text-align: center;"><span style="font-size: xx-small; font-weight: bold;">
152-166</span> </td>
</tr>
</tbody>
</table>
<!--The heading for the slides --> <br>
<table class="headTable1" border="0">
<tbody>
<tr>
<td width="100"><a href="files1.html"><img alt="" src="../../../images/btn_lArrow.gif" border="0"></a><a href="index.html"><img alt="" src="../../../images/btn_upArrow.gif" border="0"></a><a href="index.html"><img alt="" src="../../../images/btn_rArrow.gif" border="0"></a></td>
<td>More File and Directory Functions</td>
</tr>
</tbody>
</table>
<br>
<div class="disp1">
<ul class="slidesUl1">
<li><p>
Opening a File for Writing and Appending
</p><p>
When you open a file for writing, the file is created if it does not exist,
and truncated if it does.
</p><p>
If you open a file for appending, the file will not be overwritten if it exists
and the data will be appended to the bottom of the file. If it does not exist,
opening for appending creates the file.
</p><p>
To open a file for writing, the <b>fopen()</b> function returns a filehandle to
either a text or binary file. Although UNIX and MacOS do not distinguish between
text and binary files, Windows does.
</p><p>
If a file is to be shared by multiple operating systems, it is safer to open it
in binary mode in conjunction with one of the other modes.
</p><p>
As of PHP 4.3.2, the default mode is set to binary for all platforms that
distinguish between binary and text mode.
</p><p>
UNIX and MacOS X represent the end-of-line character with "\n", whereas Windows
uses "\r\n" and Mac OS 9 and earlier versions used "\r".
</p><p>
If you use Windows, the "t" mode can be used with plain-text files to translate
the "\n" to "\r\n". Otherwise, the "b" mode should be used, which does not
interpret data but treats it as just a series of bytes.
</p><p>
If the file contents look weird when it is opened or you have a lot broken images,
use the "b" mode.
</p>
<code><small>
$handle = fopen('/home/marko/file.txt','wb');<br>
$handle = fopen('http://www.ellieq.com/','w');<br>
$handle = fopen('ftp://user:password@ellieq.com/myfile.txt','a');<br>
</small></code>
</li>
<li><p>
The fwrite() and fputs() Functions
</p><p>
The <b>fwrite()</b> function writes a string text to a file and returns the
number of bytes written. An alias for the fwrite() function is <b>fputs()</b> .
</p><p>
It takes two arguments: the filehandle returned by fopen() and an optional
length argument, how many bytes to write to the file. If it fails,
fwrite() returns FALSE.
</p></li>
<li><p>
The file_put_contents() Function
</p><p>
The <b>file_put_contents()</b> function also writes a string to a file and
returns the number of bytes written, but does not require a filehandle.
Otherwise it is the same as fwrite() and fputs().
</p><p>
Format:
</p>
<code><small>
int fwrite ( filehandle, string, [ int length] )<br>
</small></code>
<p>
Example:
</p>
<code><small>
$bytes = fwrite($filehandle,"Peter Piper picked a peck of pickled peppers.\n");<br>
$bytes = fwrite($filehandle,'Jack and the Beanstalk ', 23);<br>
</small></code>
<h4>
Filename: fwrite.php
</h4>
<blockquote><small>
<div class="disp2">
<PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;html</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span> <span class="syntax17">&lt;head</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span>  <span class="syntax17">&lt;title</span><span class="syntax17">&gt;</span>Write a File with fwrite()<span class="syntax17">&lt;/title</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span> <span class="syntax17">&lt;/head</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span> <span class="syntax17">&lt;body</span><span class="syntax17"> </span><span class="syntax17">bgcolor</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">lavender</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   6:</span>  <span class="syntax17">&lt;?php</span>
<span class="gutter">   7:</span>    <span class="syntax10">$</span><span class="syntax10">name</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">Joe</span><span class="syntax14"> </span><span class="syntax14">Shmoe</span><span class="syntax14"> </span><span class="syntax14">Jr</span><span class="syntax14">.</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">   8:</span>    <span class="syntax10">$</span><span class="syntax10">address</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">100</span><span class="syntax14"> </span><span class="syntax14">Main</span><span class="syntax14"> </span><span class="syntax14">St</span><span class="syntax14">.</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">   9:</span>    <span class="syntax10">$</span><span class="syntax10">email</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">jshmoe</span><span class="syntax14">@</span><span class="syntax14">whatever</span><span class="syntax14">.</span><span class="syntax14">mil</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutterH">  10:</span>    <span class="syntax10">$</span><span class="syntax10">title</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">Major</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  11:</span>    <span class="syntax10">$</span><span class="syntax10">outputstring</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax10">$</span><span class="syntax10">name\t</span><span class="syntax10">$</span><span class="syntax10">address\t</span><span class="syntax10">$</span><span class="syntax10">email\t</span><span class="syntax10">$</span><span class="syntax10">title\n</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  12:</span>    <span class="syntax8">echo</span> <span class="syntax13">'</span><span class="syntax13">The</span><span class="syntax13"> </span><span class="syntax13">data</span><span class="syntax13"> </span><span class="syntax13">to</span><span class="syntax13"> </span><span class="syntax13">be</span><span class="syntax13"> </span><span class="syntax13">written:&lt;br&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">  13:</span>    <span class="syntax8">echo</span> <span class="syntax10">$</span><span class="syntax10">outputstring</span> <span class="syntax18">.</span><span class="syntax13">'</span><span class="syntax13">&lt;br&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">  14:</span>    
<span class="gutterH">  15:</span>    <span class="syntax10">$</span><span class="syntax10">filename</span> <span class="syntax18">=</span> <span class="syntax10">$</span><span class="syntax10">_SERVER</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">DOCUMENT_ROOT</span><span class="syntax13">'</span><span class="syntax18">]</span> <span class="syntax18">.</span><span class="syntax13">'</span><span class="syntax13">/files/info.txt</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">  16:</span>    <span class="syntax10">$</span><span class="syntax10">filehandle</span> <span class="syntax18">=</span> <span class="syntax9">fopen</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax18">,</span> <span class="syntax14">&quot;</span><span class="syntax14">wb</span><span class="syntax14">&quot;</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  17:</span>    <span class="syntax9">fwrite</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">filehandle</span><span class="syntax18">,</span> <span class="syntax10">$</span><span class="syntax10">outputstring</span><span class="syntax18">,</span> <span class="syntax9">strlen</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">outputstring</span><span class="syntax18">)</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  18:</span>    <span class="syntax9">fclose</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">filehandle</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  19:</span>  <span class="syntax17">?&gt;</span>
<span class="gutterH">  20:</span> <span class="syntax17">&lt;/body</span><span class="syntax17">&gt;</span>
<span class="gutter">  21:</span><span class="syntax17">&lt;/html</span><span class="syntax17">&gt;</span></span>
</PRE>
</div>
</small></blockquote>
<p>
A set of scalar variables are defined, the information that will be written to a file.
Then a string is created with each word separated by a tab.
</p><p>
Because the file must be writeable from the web, it would be best to store it
outside the server's root directory.
</p><p>
The filehandle returned from fopen() is opened for writing. The "b" (binary) mode
is recommended for compatiblity with Windows.
</p><p>
The fwrite() function writes the specified string, $outputstring to the filehandle,
$filehandle. The number of bytes written are returned by the strlen() function.
</p></li>
<li><p>
Appending to a File
</p><p>
When a file is opened for appending, the write will start at the end of the file.
If the file does not exist, it will be created.
</p>
<h4>
Filename: appending.php
</h4>
<blockquote><small>
<div class="disp2">
<PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;html</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span> <span class="syntax17">&lt;head</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;title</span><span class="syntax17">&gt;</span>Appending<span class="syntax17">&lt;/title</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;/head</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span> <span class="syntax17">&lt;body</span><span class="syntax17"> </span><span class="syntax17">bgcolor</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">lightgreen</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span>  <span class="syntax17">&lt;font</span><span class="syntax17"> </span><span class="syntax17">face</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">verdana</span><span class="syntax14">&quot;</span><span class="syntax17"> </span><span class="syntax17">size</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">+</span><span class="syntax14">1</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span>  <span class="syntax17">&lt;?php</span>
<span class="gutter">   6:</span>    <span class="syntax10">$</span><span class="syntax10">name</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">John</span><span class="syntax14"> </span><span class="syntax14">Doe</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">   7:</span>    <span class="syntax10">$</span><span class="syntax10">address</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">1001</span><span class="syntax14"> </span><span class="syntax14">Logic</span><span class="syntax14"> </span><span class="syntax14">Dr</span><span class="syntax14">.</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">   8:</span>    <span class="syntax10">$</span><span class="syntax10">email</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">johndoe</span><span class="syntax14">@</span><span class="syntax14">place</span><span class="syntax14">.</span><span class="syntax14">gov</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">   9:</span>    <span class="syntax10">$</span><span class="syntax10">title</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">VP</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutterH">  10:</span>    <span class="syntax10">$</span><span class="syntax10">outputstring</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax10">$</span><span class="syntax10">name\t</span><span class="syntax10">$</span><span class="syntax10">address\t</span><span class="syntax10">$</span><span class="syntax10">email\t</span><span class="syntax10">$</span><span class="syntax10">title\n</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  11:</span>    <span class="syntax8">echo</span> <span class="syntax13">'</span><span class="syntax13">The</span><span class="syntax13"> </span><span class="syntax13">data</span><span class="syntax13"> </span><span class="syntax13">to</span><span class="syntax13"> </span><span class="syntax13">be</span><span class="syntax13"> </span><span class="syntax13">written:&lt;br</span><span class="syntax13"> </span><span class="syntax13">/&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">  12:</span>    <span class="syntax8">echo</span> <span class="syntax10">$</span><span class="syntax10">outputstring</span> <span class="syntax18">.</span><span class="syntax13">'</span><span class="syntax13">&lt;br&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">  13:</span>    
<span class="gutter">  14:</span>    <span class="syntax10">$</span><span class="syntax10">filename</span> <span class="syntax18">=</span> <span class="syntax10">$</span><span class="syntax10">_SERVER</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">DOCUMENT_ROOT</span><span class="syntax13">'</span><span class="syntax18">]</span> <span class="syntax18">.</span><span class="syntax13">'</span><span class="syntax13">/files/info.txt</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutterH">  15:</span>    <span class="syntax10">$</span><span class="syntax10">filehandle</span> <span class="syntax18">=</span> <span class="syntax9">fopen</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax18">,</span> <span class="syntax14">&quot;</span><span class="syntax14">ab</span><span class="syntax14">&quot;</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  16:</span>    <span class="syntax8">if</span><span class="syntax18"> (</span><span class="syntax9">fwrite</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">filehandle</span><span class="syntax18">,</span> <span class="syntax10">$</span><span class="syntax10">outputstring</span><span class="syntax18">,</span>
<span class="gutter">  17:</span>               <span class="syntax9">strlen</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">outputstring</span><span class="syntax18">)</span><span class="syntax18">)</span> <span class="syntax18">=</span><span class="syntax18">=</span> <span class="syntax8">FALSE</span><span class="syntax18">)</span> <span class="syntax18">{</span>
<span class="gutter">  18:</span>      <span class="syntax8">echo</span> <span class="syntax14">&quot;</span><span class="syntax14">You</span><span class="syntax14"> </span><span class="syntax14">cannot</span><span class="syntax14"> </span><span class="syntax14">write</span><span class="syntax14"> </span><span class="syntax14">to</span><span class="syntax14"> </span><span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax14">.</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  19:</span>    <span class="syntax18">}</span>
<span class="gutterH">  20:</span>    <span class="syntax8">else</span> <span class="syntax18">{</span>
<span class="gutter">  21:</span>      <span class="syntax10">$</span><span class="syntax10">text</span> <span class="syntax18">=</span> <span class="syntax9">file_get_contents</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  22:</span>      <span class="syntax8">echo</span> <span class="syntax13">'</span><span class="syntax13">&lt;br</span><span class="syntax13"> </span><span class="syntax13">/&gt;The</span><span class="syntax13"> </span><span class="syntax13">contents</span><span class="syntax13"> </span><span class="syntax13">of</span><span class="syntax13"> </span><span class="syntax13">the</span><span class="syntax13"> </span><span class="syntax13">file</span><span class="syntax13"> </span><span class="syntax13">is:&lt;br</span><span class="syntax13"> </span><span class="syntax13">/&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">  23:</span>      <span class="syntax8">echo</span> <span class="syntax14">&quot;</span><span class="syntax14">&lt;</span><span class="syntax14">pre</span><span class="syntax14">&gt;</span><span class="syntax10">$</span><span class="syntax10">text</span><span class="syntax14">&lt;</span><span class="syntax14">/</span><span class="syntax14">pre</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  24:</span>    <span class="syntax18">}</span>
<span class="gutterH">  25:</span>    <span class="syntax9">fclose</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">filehandle</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  26:</span>  <span class="syntax17">?&gt;</span>
<span class="gutter">  27:</span>  <span class="syntax17">&lt;/font</span><span class="syntax17">&gt;</span>
<span class="gutter">  28:</span> <span class="syntax17">&lt;/body</span><span class="syntax17">&gt;</span>
<span class="gutter">  29:</span><span class="syntax17">&lt;/html</span><span class="syntax17">&gt;</span></span>
</PRE>
</div>
</small></blockquote>
<p>
The file info.txt is opened for appending, which means the internal file pointer
will start writing at the end of the file, rather than the beginning.
</p><p>
If the fwrite() function fails, the program will produce an error. Otherwise,
the string in $outputstring will be appended to the file.
</p><p>
The contents of the file are read and displayed.
</p></li>
<li><p>
Locking Files with flock()
</p><p>
What if two or more customers are trying to write to a Web site at the same time?
</p><p>
To prevent this, you can lock the file so that a user has exclusive access to
it and then unlock it when he or she has finished using it.
</p><p>
PHP supports a portable way of locking complete files with the <b>flock()</b>
function.
</p><p>
This is called advisory locking because all accessing programs have
to use the same locking mechanism or it will not work.
See the following table for a list of flock() operations.
</p><p>
Table: flock() Operations
</p>
<blockquote>
<table>
<tr>
<td><code><b>
Operation<br>
<u>(Constant)</u></b>&nbsp;</code></td>
<td><code><b>
Numeric&nbsp;<br>
<u>Value</u></b></code></td>
<td><code><b><u>
Operation It Peforms</u></b></code></td>
</tr><tr>
<td><code>
LOCK_EX</code></td>
<td><code>
2</code></td>
<td><code>
Acquires an exclusive lock (writer).</code></td>
</tr><tr>
<td><code>
LOCK_NB</code></td>
<td><code>
4</code></td>
<td><code>
Nonblocking (no waiting) while the lock is being acquired.</code></td>
</tr><tr>
<td><code>
LOCK_SH</code></td>
<td><code>
1</code></td>
<td><code>
Acquires a shared lock (reader).</code></td>
</tr><tr>
<td><code>
LOCK_UN</code></td>
<td><code>
3</code></td>
<td><code>
Releases a lock (shared or exclusive).</code></td>
</tr>
</table>
</blockquote>
<p>
The flock() function uses a filehandle returned from the fopen() function.
The lock is released by fclose() on the filehandle.
fclose() is also called automatically when the script is finished.
The function returns TRUE on success or FALSE on failure.
</p><p>
Whether or not this function works properly is entirely dependent on your
operating system. For example, it is not supported on older systems like
Windows 98 or for networked file systems (NFS), and so on.
</p><p>
Format:
</p>
<code><small>
bool flock ( resource handle, int operation [, int &amp;wouldblock] )<br>
</small></code>
<h4>
Filename: locking.php
</h4>
<blockquote><small>
<div class="disp2">
<PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;html</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span> <span class="syntax17">&lt;head</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;title</span><span class="syntax17">&gt;</span>File Locking<span class="syntax17">&lt;/title</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;/head</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span> <span class="syntax17">&lt;body</span><span class="syntax17"> </span><span class="syntax17">bgcolor</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">lightgreen</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span>  <span class="syntax17">&lt;font</span><span class="syntax17"> </span><span class="syntax17">face</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">verdana</span><span class="syntax14">&quot;</span><span class="syntax17"> </span><span class="syntax17">size</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">+</span><span class="syntax14">1</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span>  <span class="syntax17">&lt;?php</span>
<span class="gutter">   6:</span>    <span class="syntax10">$</span><span class="syntax10">name</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">Jane</span><span class="syntax14"> </span><span class="syntax14">Doe</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">   7:</span>    <span class="syntax10">$</span><span class="syntax10">address</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">1</span><span class="syntax14"> </span><span class="syntax14">Sensible</span><span class="syntax14"> </span><span class="syntax14">Ave</span><span class="syntax14">.</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">   8:</span>    <span class="syntax10">$</span><span class="syntax10">email</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">janedoe</span><span class="syntax14">@</span><span class="syntax14">school</span><span class="syntax14">.</span><span class="syntax14">edu</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">   9:</span>    <span class="syntax10">$</span><span class="syntax10">title</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">Dean</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutterH">  10:</span>    <span class="syntax10">$</span><span class="syntax10">outputstring</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax10">$</span><span class="syntax10">name\t</span><span class="syntax10">$</span><span class="syntax10">address\t</span><span class="syntax10">$</span><span class="syntax10">email\t</span><span class="syntax10">$</span><span class="syntax10">title\n</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  11:</span>    <span class="syntax8">echo</span> <span class="syntax13">'</span><span class="syntax13">The</span><span class="syntax13"> </span><span class="syntax13">data</span><span class="syntax13"> </span><span class="syntax13">to</span><span class="syntax13"> </span><span class="syntax13">be</span><span class="syntax13"> </span><span class="syntax13">written:&lt;br</span><span class="syntax13"> </span><span class="syntax13">/&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">  12:</span>    <span class="syntax8">echo</span> <span class="syntax10">$</span><span class="syntax10">outputstring</span> <span class="syntax18">.</span><span class="syntax13">'</span><span class="syntax13">&lt;br&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">  13:</span>    
<span class="gutter">  14:</span>    <span class="syntax10">$</span><span class="syntax10">filename</span> <span class="syntax18">=</span> <span class="syntax10">$</span><span class="syntax10">_SERVER</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">DOCUMENT_ROOT</span><span class="syntax13">'</span><span class="syntax18">]</span> <span class="syntax18">.</span><span class="syntax13">'</span><span class="syntax13">/files/info.txt</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutterH">  15:</span>    <span class="syntax10">$</span><span class="syntax10">filehandle</span> <span class="syntax18">=</span> <span class="syntax9">fopen</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax18">,</span> <span class="syntax14">&quot;</span><span class="syntax14">ab</span><span class="syntax14">&quot;</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  16:</span>    <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">Acquire</span><span class="syntax2"> </span><span class="syntax2">an</span><span class="syntax2"> </span><span class="syntax2">exclusive</span><span class="syntax2"> </span><span class="syntax2">lock</span>
<span class="gutter">  17:</span>    <span class="syntax8">if</span><span class="syntax18"> (</span><span class="syntax9">flock</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">filehandle</span><span class="syntax18">,</span> LOCK_EX<span class="syntax18">)</span><span class="syntax18">)</span> <span class="syntax18">{</span> 
<span class="gutter">  18:</span>      <span class="syntax9">fwrite</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">filehandle</span><span class="syntax18">,</span> <span class="syntax10">$</span><span class="syntax10">outputstring</span><span class="syntax18">,</span> <span class="syntax9">strlen</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">outputstring</span><span class="syntax18">)</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  19:</span>      <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">Release</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">lock</span>
<span class="gutterH">  20:</span>      <span class="syntax9">flock</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">filehandle</span><span class="syntax18">,</span> LOCK_UN<span class="syntax18">)</span><span class="syntax18">;</span> 
<span class="gutter">  21:</span>    <span class="syntax18">}</span>
<span class="gutter">  22:</span>    <span class="syntax8">else</span> <span class="syntax18">{</span>
<span class="gutter">  23:</span>      <span class="syntax8">echo</span> <span class="syntax14">&quot;</span><span class="syntax14">Couldn</span><span class="syntax14">'</span><span class="syntax14">t</span><span class="syntax14"> </span><span class="syntax14">lock</span><span class="syntax14"> </span><span class="syntax14">this</span><span class="syntax14"> </span><span class="syntax14">file</span><span class="syntax14">.</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  24:</span>      <span class="syntax8">exit</span><span class="syntax18">(</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutterH">  25:</span>    <span class="syntax18">}</span>
<span class="gutter">  26:</span>    <span class="syntax10">$</span><span class="syntax10">text</span> <span class="syntax18">=</span> <span class="syntax9">file_get_contents</span><span class="syntax18">(</span><span class="syntax14">&quot;</span><span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax14">&quot;</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  27:</span>    <span class="syntax8">echo</span> <span class="syntax13">'</span><span class="syntax13">&lt;br</span><span class="syntax13"> </span><span class="syntax13">/&gt;The</span><span class="syntax13"> </span><span class="syntax13">contents</span><span class="syntax13"> </span><span class="syntax13">of</span><span class="syntax13"> </span><span class="syntax13">the</span><span class="syntax13"> </span><span class="syntax13">file</span><span class="syntax13"> </span><span class="syntax13">is:&lt;br</span><span class="syntax13"> </span><span class="syntax13">/&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">  28:</span>    <span class="syntax8">echo</span> <span class="syntax14">&quot;</span><span class="syntax14">&lt;</span><span class="syntax14">pre</span><span class="syntax14">&gt;</span><span class="syntax10">$</span><span class="syntax10">text</span><span class="syntax14">&lt;</span><span class="syntax14">/</span><span class="syntax14">pre</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  29:</span>    <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">This</span><span class="syntax2"> </span><span class="syntax2">would</span><span class="syntax2"> </span><span class="syntax2">also</span><span class="syntax2"> </span><span class="syntax2">release</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">lock</span>
<span class="gutterH">  30:</span>    <span class="syntax9">fclose</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">filehandle</span><span class="syntax18">)</span><span class="syntax18">;</span> 
<span class="gutter">  31:</span>  <span class="syntax17">?&gt;</span>
<span class="gutter">  32:</span>  <span class="syntax17">&lt;/font</span><span class="syntax17">&gt;</span>
<span class="gutter">  33:</span> <span class="syntax17">&lt;/body</span><span class="syntax17">&gt;</span>
<span class="gutter">  34:</span><span class="syntax17">&lt;/html</span><span class="syntax17">&gt;</span></span>
</PRE>
</div>
</small></blockquote>
<p>
The flock() function attempts to put an exclusive lock on the file; that is,
the file cannot be shared while it is being written to.
</p><p>
If the lock is successfully set, the program can now write to the file.
</p><p>
Once the program has finished writing to the file, the exisiting lock is released
with the LOCK_UN operation.
</p><p>
If the lock was not released with flock(), the fclose() function would cause the
lock to be released when it closes the filehandle.
</p></li>
<li><p>
File Checks
</p><p>
Before performing operations on files or directories, it is a good practice to
verify whether or not the file even exists, if it is readable, writable,
executable, and so on.
</p><p>
PHP provides a set of functions for testing the status of a file. See the table.
</p><p>
Table: File Testing Functions
</p>
<blockquote>
<table>
<tr>
<td><code><b><u>
Function</u></b></code></td>
<td><code><b><u>
Description</u></b></code></td>
</tr><tr>
<td><code>
file_exists()</code></td>
<td><code>
Checks if the file or directory exists.</code></td>
</tr><tr>
<td><code>
is_dir()</code></td>
<td><code>
Checks if the filename is a directory.</code></td>
</tr><tr>
<td><code>
is_file()</code></td>
<td><code>
Checks if the filename is a file.</code></td>
</tr><tr>
<td><code>
is_link()</code></td>
<td><code>
Checks if the filename is a symbolic link.</code></td>
</tr><tr>
<td><code>
is_readable()</code></td>
<td><code>
Checks if the file is readable.</code></td>
</tr><tr>
<td><code>
is_uploaded_file()&nbsp;</code></td>
<td><code>
Checks if the file was uploaded by an HTTP host.</code></td>
</tr><tr>
<td><code>
is_writable()</code></td>
<td><code>
Checks if the file is writable.</code></td>
</tr><tr>
<td><code>
is_writeable()</code></td>
<td><code>
An alias for is_writable.</code></td>
</tr><tr>
<td><code>
stat()</code></td>
<td><code>
Gives information about a file.</code></td>
</tr>
</table>
</blockquote>
</li>
<li><p>
The file_exists() Function
</p><p>
The <b>file_exists()</b> function checks to see whether a file or directory
exists. It returns TRUE if it does, and FALSE if it does not.
</p><p>
Format:
</p>
<blockquote><code><small>
bool file_exists ( string filename );<br>
</small></code></blockquote>
<p>
Example:
</p>
<blockquote><code><small>
if (file_exists('filetest.php');<br>
</small></code></blockquote>
<h4>
Filename: fileExists.php
</h4>
<blockquote><small>
<div class="disp2">
<PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;html</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span> <span class="syntax17">&lt;head</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span>  <span class="syntax17">&lt;title</span><span class="syntax17">&gt;</span>File Exists?<span class="syntax17">&lt;/title</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span> <span class="syntax17">&lt;/head</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span> <span class="syntax17">&lt;body</span><span class="syntax17"> </span><span class="syntax17">bgcolor</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">lightgreen</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   6:</span>  <span class="syntax17">&lt;font</span><span class="syntax17"> </span><span class="syntax17">face</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">verdana</span><span class="syntax14">&quot;</span><span class="syntax17"> </span><span class="syntax17">size</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">+</span><span class="syntax14">1</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   7:</span>  <span class="syntax17">&lt;?php</span>
<span class="gutter">   8:</span>    <span class="syntax10">$</span><span class="syntax10">webname</span> <span class="syntax18">=</span> <span class="syntax13">'</span><span class="syntax13">/pictures/pizza-chef.jpg</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">   9:</span>    <span class="syntax10">$</span><span class="syntax10">filename</span> <span class="syntax18">=</span> <span class="syntax10">$</span><span class="syntax10">_SERVER</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">DOCUMENT_ROOT</span><span class="syntax13">'</span><span class="syntax18">]</span> <span class="syntax18">.</span> <span class="syntax10">$</span><span class="syntax10">webname</span><span class="syntax18">;</span>
<span class="gutterH">  10:</span>    <span class="syntax8">if</span><span class="syntax18"> (</span><span class="syntax9">file_exists</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax18">)</span><span class="syntax18">)</span> <span class="syntax18">{</span>
<span class="gutter">  11:</span>      <span class="syntax8">echo</span> <span class="syntax13">'</span><span class="syntax13">&lt;img</span><span class="syntax13"> </span><span class="syntax13">src=</span><span class="syntax13">'</span><span class="syntax18">.</span> <span class="syntax10">$</span><span class="syntax10">webname</span> <span class="syntax18">.</span><span class="syntax13">'</span><span class="syntax13">&gt;&lt;br</span><span class="syntax13"> </span><span class="syntax13">/&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">  12:</span>    <span class="syntax18">}</span>
<span class="gutter">  13:</span>    <span class="syntax8">else</span> <span class="syntax18">{</span>
<span class="gutter">  14:</span>      <span class="syntax8">echo</span> <span class="syntax14">&quot;</span><span class="syntax14">&lt;</span><span class="syntax14">em</span><span class="syntax14">&gt;</span><span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax14">&lt;</span><span class="syntax14">/</span><span class="syntax14">em</span><span class="syntax14">&gt;</span><span class="syntax14"> </span><span class="syntax14">doesn</span><span class="syntax14">'</span><span class="syntax14">t</span><span class="syntax14"> </span><span class="syntax14">exist</span><span class="syntax14">.</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutterH">  15:</span>      <span class="syntax8">exit</span><span class="syntax18">(</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  16:</span>    <span class="syntax18">}</span>
<span class="gutter">  17:</span>  <span class="syntax17">?&gt;</span>
<span class="gutter">  18:</span>  <span class="syntax17">&lt;/font</span><span class="syntax17">&gt;</span>
<span class="gutter">  19:</span> <span class="syntax17">&lt;/body</span><span class="syntax17">&gt;</span>
<span class="gutterH">  20:</span><span class="syntax17">&lt;/html</span><span class="syntax17">&gt;</span></span>
</PRE>
</div>
</small></blockquote>
<p>
The file_exists() function checks to see if the image file assigned to $filename
exists before displaying it. Note that file_exists() uses the operating
system path, while the HTML "&lt;src&gt;" tag uses the web (HTTP) path.
</p></li>
<li><p>
The is_file() Function
</p><p>
The <b>is_file()</b> function checks to see if a file exists and is a regular file;
that is, not a directory.
</p><p>
It takes the name of the file as its argument and returns TRUE if the file is a
regular file, and FALSE if it is not. Processing is faster if you use a relative
path name rather than an absolute path.
</p><p>
Format:
</p>
<blockquote><code><small>
bool is_file ( string filename )<br
</small></code></blockquote>
</p><p>
Example:
</p>
<blockquote><code><small>
if (is_file('myfile.php') {<br>
&nbsp;&nbsp;print 'True&lt;br /&gt;';<br>
}<br>
</small></code></blockquote>
<h4>
Filename: isFile.php
</h4>
<blockquote><small>
<div class="disp2">
<PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;html</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span> <span class="syntax17">&lt;head</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span>  <span class="syntax17">&lt;title</span><span class="syntax17">&gt;</span>Is it a Regular File?<span class="syntax17">&lt;/title</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span> <span class="syntax17">&lt;/head</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span> <span class="syntax17">&lt;body</span><span class="syntax17"> </span><span class="syntax17">bgcolor</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">lightgreen</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   6:</span>  <span class="syntax17">&lt;font</span><span class="syntax17"> </span><span class="syntax17">face</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">verdana</span><span class="syntax14">&quot;</span><span class="syntax17"> </span><span class="syntax17">size</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">+</span><span class="syntax14">1</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   7:</span>  <span class="syntax17">&lt;?php</span>
<span class="gutter">   8:</span>    <span class="syntax10">$</span><span class="syntax10">filename</span> <span class="syntax18">=</span> <span class="syntax10">$</span><span class="syntax10">_SERVER</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">DOCUMENT_ROOT</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">;</span>
<span class="gutter">   9:</span>    <span class="syntax8">if</span><span class="syntax18"> (</span><span class="syntax9">is_file</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax18">)</span><span class="syntax18">)</span> <span class="syntax18">{</span>
<span class="gutterH">  10:</span>      <span class="syntax8">echo</span> <span class="syntax14">&quot;</span><span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax14"> </span><span class="syntax14">exists</span><span class="syntax14"> </span><span class="syntax14">and</span><span class="syntax14"> </span><span class="syntax14">is</span><span class="syntax14"> </span><span class="syntax14">a</span><span class="syntax14"> </span><span class="syntax14">regular</span><span class="syntax14"> </span><span class="syntax14">file</span><span class="syntax14">.</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  11:</span>    <span class="syntax18">}</span>
<span class="gutter">  12:</span>    <span class="syntax8">else</span> <span class="syntax18">{</span>
<span class="gutter">  13:</span>      <span class="syntax8">exit</span><span class="syntax18">(</span><span class="syntax14">&quot;</span><span class="syntax14">&lt;</span><span class="syntax14">em</span><span class="syntax14">&gt;</span><span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax14">&lt;</span><span class="syntax14">/</span><span class="syntax14">em</span><span class="syntax14">&gt;</span><span class="syntax14"> </span><span class="syntax14">is</span><span class="syntax14"> </span><span class="syntax14">not</span><span class="syntax14"> </span><span class="syntax14">a</span><span class="syntax14"> </span><span class="syntax14">regular</span><span class="syntax14"> </span><span class="syntax14">file</span><span class="syntax14">.</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  14:</span>    <span class="syntax18">}</span>
<span class="gutterH">  15:</span>  <span class="syntax17">?&gt;</span>
<span class="gutter">  16:</span>  <span class="syntax17">&lt;/font</span><span class="syntax17">&gt;</span>
<span class="gutter">  17:</span> <span class="syntax17">&lt;/body</span><span class="syntax17">&gt;</span>
<span class="gutter">  18:</span><span class="syntax17">&lt;/html</span><span class="syntax17">&gt;</span></span>
</PRE>
</div>
</small></blockquote>
<p>
The is_file() function not only checks to see if the file exists, but also if it
is a regular file; that is, not a directory.
</p></li>
<li><p>
The is_readable() Function
</p><p>
The <b>is_readable()</b> function checks to see if you can read from a file.
</p><p>
It takes the filename as its argument and returns TRUE if the filename exists
and is readable.
</p><p>
If the PHP script is being executed by the server, the server's permissions
(usually limited) determine whether or not the PHP program can read from the file,
and if it is being executed at the shell prompt, the permissions of the user
running the script are the deciding factor. Normally, the file should be
readable by others or "world" in the operating system.
</p><p>
Format:
</p>
<blockquote><code><small>
bool is_readable ( string filename );<br>
</small></code></blockquote>
</p><p>
Example:
</p>
<blockquote><code><small>
if (is_readable('file.txt')) {<br>
&nbsp;&nbsp;echo 'File is readable&lt;br /&gt;';<br>
}<br>
</small></code></blockquote>
<h4>
Filename: isReadable.php
</h4>
<blockquote><small>
<div class="disp2">
<PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;html</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span> <span class="syntax17">&lt;head</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span>  <span class="syntax17">&lt;title</span><span class="syntax17">&gt;</span>Is Readable?<span class="syntax17">&lt;/title</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span> <span class="syntax17">&lt;/head</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span> <span class="syntax17">&lt;body</span><span class="syntax17"> </span><span class="syntax17">bgcolor</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">lightgreen</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   6:</span>  <span class="syntax17">&lt;font</span><span class="syntax17"> </span><span class="syntax17">face</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">verdana</span><span class="syntax14">&quot;</span><span class="syntax17"> </span><span class="syntax17">size</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">+</span><span class="syntax14">1</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   7:</span>  <span class="syntax17">&lt;?php</span>
<span class="gutter">   8:</span>    <span class="syntax10">$</span><span class="syntax10">filename</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">testing</span><span class="syntax14">.</span><span class="syntax14">txt</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">   9:</span>    <span class="syntax8">if</span><span class="syntax18"> (</span><span class="syntax9">is_readable</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax18">)</span><span class="syntax18">)</span><span class="syntax18">{</span>
<span class="gutterH">  10:</span>      <span class="syntax8">echo</span> <span class="syntax14">&quot;</span><span class="syntax14">&lt;</span><span class="syntax14">em</span><span class="syntax14">&gt;</span><span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax14">&lt;</span><span class="syntax14">/</span><span class="syntax14">em</span><span class="syntax14">&gt;</span><span class="syntax14"> </span><span class="syntax14">is</span><span class="syntax14"> </span><span class="syntax14">readable</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  11:</span>    <span class="syntax18">}</span>
<span class="gutter">  12:</span>    <span class="syntax8">else</span> <span class="syntax18">{</span>
<span class="gutter">  13:</span>        <span class="syntax8">exit</span><span class="syntax18">(</span><span class="syntax14">&quot;</span><span class="syntax14">Can</span><span class="syntax14">'</span><span class="syntax14">t</span><span class="syntax14"> </span><span class="syntax14">read</span><span class="syntax14"> </span><span class="syntax14">from</span><span class="syntax14">:</span><span class="syntax14"> </span><span class="syntax14">&lt;</span><span class="syntax14">em</span><span class="syntax14">&gt;</span><span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax14">&lt;</span><span class="syntax14">/</span><span class="syntax14">em</span><span class="syntax14">&gt;</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  14:</span>    <span class="syntax18">}</span>
<span class="gutterH">  15:</span>  <span class="syntax17">?&gt;</span>
<span class="gutter">  16:</span>  <span class="syntax17">&lt;/font</span><span class="syntax17">&gt;</span>
<span class="gutter">  17:</span> <span class="syntax17">&lt;/body</span><span class="syntax17">&gt;</span>
<span class="gutter">  18:</span><span class="syntax17">&lt;/html</span><span class="syntax17">&gt;</span></span>
</PRE>
</div>
</small></blockquote>
<p>
The is_readable() function returns true if $filename is readable by this PHP script.
If is_readable() returns false, the else block is executed, and the program exits.
</p></li>
<li><p>
The is_writable() Function
</p><p>
When opening a file for writing, you might run into a problem with permissions
if you are trying to put the file in a directory not accessible to the Web.
</p><p>
Because the PHP script is executed on behalf of the server, it shares the same
permissions. Normally, the server does not have world-write permissions turned
on to prevent hackers from breaking into your site and causing havoc.
</p><p>
The <b>is_writable()</b> (or is_writeable) function returns true if a file
exists and is writable, and false if it is not.
</p><p>
Format:
</p>
<blockquote><code><small>
bool is_writable ( string filename )<br>
</small></code></blockquote>
</p><p>
Example:
</p>
<blockquote><code><small>
if (is_writable($filename)) {<br>
&nbsp;&nbsp;echo "$filename is writable";<br>
}<br>
</small></code></blockquote>
<h4>
Filename: isWritable.php
</h4>
<blockquote><small>
<div class="disp2">
<PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;html</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span> <span class="syntax17">&lt;head</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span>  <span class="syntax17">&lt;title</span><span class="syntax17">&gt;</span>Is Writable?<span class="syntax17">&lt;/title</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span> <span class="syntax17">&lt;/head</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span> <span class="syntax17">&lt;body</span><span class="syntax17"> </span><span class="syntax17">bgcolor</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">lightgreen</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   6:</span>  <span class="syntax17">&lt;font</span><span class="syntax17"> </span><span class="syntax17">face</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">verdana</span><span class="syntax14">&quot;</span><span class="syntax17"> </span><span class="syntax17">size</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">+</span><span class="syntax14">1</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   7:</span>  <span class="syntax17">&lt;?php</span>
<span class="gutter">   8:</span>    <span class="syntax10">$</span><span class="syntax10">name</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">John</span><span class="syntax14"> </span><span class="syntax14">Doe</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">   9:</span>    <span class="syntax10">$</span><span class="syntax10">address</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">1001</span><span class="syntax14"> </span><span class="syntax14">Logic</span><span class="syntax14"> </span><span class="syntax14">Dr</span><span class="syntax14">.</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutterH">  10:</span>    <span class="syntax10">$</span><span class="syntax10">email</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">johndoe</span><span class="syntax14">@</span><span class="syntax14">place</span><span class="syntax14">.</span><span class="syntax14">gov</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  11:</span>    <span class="syntax10">$</span><span class="syntax10">title</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">VP</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  12:</span>    <span class="syntax10">$</span><span class="syntax10">outputstring</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax10">$</span><span class="syntax10">name\t</span><span class="syntax10">$</span><span class="syntax10">address\t</span><span class="syntax10">$</span><span class="syntax10">email\t</span><span class="syntax10">$</span><span class="syntax10">title\n</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  13:</span>    <span class="syntax8">echo</span> <span class="syntax13">'</span><span class="syntax13">The</span><span class="syntax13"> </span><span class="syntax13">data</span><span class="syntax13"> </span><span class="syntax13">to</span><span class="syntax13"> </span><span class="syntax13">be</span><span class="syntax13"> </span><span class="syntax13">written:&lt;br</span><span class="syntax13"> </span><span class="syntax13">/&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">  14:</span>    <span class="syntax8">echo</span> <span class="syntax10">$</span><span class="syntax10">outputstring</span> <span class="syntax18">.</span><span class="syntax13">'</span><span class="syntax13">&lt;br&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutterH">  15:</span>    
<span class="gutter">  16:</span>    <span class="syntax10">$</span><span class="syntax10">filename</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">testing</span><span class="syntax14">.</span><span class="syntax14">txt</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  17:</span>    <span class="syntax8">if</span><span class="syntax18"> (</span><span class="syntax9">is_writable</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax18">)</span><span class="syntax18">)</span> <span class="syntax18">{</span>
<span class="gutter">  18:</span>      <span class="syntax10">$</span><span class="syntax10">filehandle</span> <span class="syntax18">=</span> <span class="syntax9">fopen</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax18">,</span> <span class="syntax14">&quot;</span><span class="syntax14">wb</span><span class="syntax14">&quot;</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  19:</span>      <span class="syntax9">fwrite</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">filehandle</span><span class="syntax18">,</span> <span class="syntax10">$</span><span class="syntax10">outputstring</span><span class="syntax18">,</span> <span class="syntax9">strlen</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">outputstring</span><span class="syntax18">)</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutterH">  20:</span>    <span class="syntax18">}</span>
<span class="gutter">  21:</span>    <span class="syntax8">else</span> <span class="syntax18">{</span>
<span class="gutter">  22:</span>      <span class="syntax8">exit</span><span class="syntax18">(</span><span class="syntax14">&quot;</span><span class="syntax14">Can</span><span class="syntax14">'</span><span class="syntax14">t</span><span class="syntax14"> </span><span class="syntax14">write</span><span class="syntax14"> </span><span class="syntax14">to</span><span class="syntax14">:</span><span class="syntax14"> </span><span class="syntax14">&lt;</span><span class="syntax14">em</span><span class="syntax14">&gt;</span><span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax14">&lt;</span><span class="syntax14">/</span><span class="syntax14">em</span><span class="syntax14">&gt;</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  23:</span>    <span class="syntax18">}</span>
<span class="gutter">  24:</span>    <span class="syntax9">fclose</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">filehandle</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutterH">  25:</span>  <span class="syntax17">?&gt;</span>
<span class="gutter">  26:</span>  <span class="syntax17">&lt;/font</span><span class="syntax17">&gt;</span>
<span class="gutter">  27:</span> <span class="syntax17">&lt;/body</span><span class="syntax17">&gt;</span>
<span class="gutter">  28:</span><span class="syntax17">&lt;/html</span><span class="syntax17">&gt;</span></span>
</PRE>
</div>
</small></blockquote>
<p>
The is_writable() built-in function returns true if PHP can write to this file,
and the fopen() function will attempt to open it.
</p><p>
If the is_writeable() function returns false, the program exits.
</p>
<h4>
Filename: myError.php
</h4>
<blockquote><small>
<div class="disp2">
<PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;html</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span> <span class="syntax17">&lt;head</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span>  <span class="syntax17">&lt;title</span><span class="syntax17">&gt;</span>Handling File Errors<span class="syntax17">&lt;/title</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span> <span class="syntax17">&lt;/head</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span> <span class="syntax17">&lt;body</span><span class="syntax17"> </span><span class="syntax17">bgcolor</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">lavender</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   6:</span>  <span class="syntax17">&lt;font</span><span class="syntax17"> </span><span class="syntax17">face</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">verdana</span><span class="syntax14">&quot;</span><span class="syntax17"> </span><span class="syntax17">size</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">+</span><span class="syntax14">1</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   7:</span>  <span class="syntax17">&lt;?php</span>
<span class="gutter">   8:</span>    <span class="syntax10">$</span><span class="syntax10">name</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">Joe</span><span class="syntax14"> </span><span class="syntax14">Shmoe</span><span class="syntax14"> </span><span class="syntax14">Jr</span><span class="syntax14">.</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">   9:</span>    <span class="syntax10">$</span><span class="syntax10">address</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">100</span><span class="syntax14"> </span><span class="syntax14">Main</span><span class="syntax14"> </span><span class="syntax14">St</span><span class="syntax14">.</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutterH">  10:</span>    <span class="syntax10">$</span><span class="syntax10">email</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">jshmoe</span><span class="syntax14">@</span><span class="syntax14">whatever</span><span class="syntax14">.</span><span class="syntax14">mil</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  11:</span>    <span class="syntax10">$</span><span class="syntax10">title</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">Major</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  12:</span>    <span class="syntax10">$</span><span class="syntax10">outputstring</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax10">$</span><span class="syntax10">name\t</span><span class="syntax10">$</span><span class="syntax10">address\t</span><span class="syntax10">$</span><span class="syntax10">email\t</span><span class="syntax10">$</span><span class="syntax10">title\n</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  13:</span>    <span class="syntax8">echo</span> <span class="syntax13">'</span><span class="syntax13">The</span><span class="syntax13"> </span><span class="syntax13">data</span><span class="syntax13"> </span><span class="syntax13">to</span><span class="syntax13"> </span><span class="syntax13">be</span><span class="syntax13"> </span><span class="syntax13">written:&lt;br</span><span class="syntax13"> </span><span class="syntax13">/&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">  14:</span>    <span class="syntax8">echo</span> <span class="syntax10">$</span><span class="syntax10">outputstring</span> <span class="syntax18">.</span><span class="syntax13">'</span><span class="syntax13">&lt;br&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutterH">  15:</span>
<span class="gutter">  16:</span>    <span class="syntax10">$</span><span class="syntax10">filename</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">info</span><span class="syntax14">.</span><span class="syntax14">txt</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  17:</span>    <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">Suppress</span><span class="syntax2"> </span><span class="syntax2">error</span><span class="syntax2"> </span><span class="syntax2">message,</span><span class="syntax2"> </span><span class="syntax2">if</span><span class="syntax2"> </span><span class="syntax2">there</span><span class="syntax2"> </span><span class="syntax2">is</span><span class="syntax2"> </span><span class="syntax2">one</span>
<span class="gutter">  18:</span>    <span class="syntax18">@</span> <span class="syntax10">$</span><span class="syntax10">fp</span> <span class="syntax18">=</span> <span class="syntax9">fopen</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax18">,</span> <span class="syntax14">&quot;</span><span class="syntax14">wb</span><span class="syntax14">&quot;</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  19:</span>    <span class="syntax8">if</span><span class="syntax18"> (</span><span class="syntax18">!</span><span class="syntax10">$</span><span class="syntax10">fp</span> <span class="syntax18">)</span> <span class="syntax18">{</span>
<span class="gutterH">  20:</span>      <span class="syntax8">echo</span> <span class="syntax14">&quot;</span><span class="syntax14">Error</span><span class="syntax14">:</span><span class="syntax14"> </span><span class="syntax14">You</span><span class="syntax14"> </span><span class="syntax14">don</span><span class="syntax14">'</span><span class="syntax14">t</span><span class="syntax14"> </span><span class="syntax14">have</span><span class="syntax14"> </span><span class="syntax14">permission</span><span class="syntax14"> </span><span class="syntax14">to</span><span class="syntax14"> </span><span class="syntax14">open</span>
<span class="gutter">  21:</span><span class="syntax14"> </span><span class="syntax14"> </span><span class="syntax14"> </span><span class="syntax14"> </span><span class="syntax14"> </span><span class="syntax14"> </span><span class="syntax14"> </span><span class="syntax14"> </span><span class="syntax14"> </span><span class="syntax14"> </span><span class="syntax14"> </span><span class="syntax14"> </span><span class="syntax14">this</span><span class="syntax14"> </span><span class="syntax14">file</span><span class="syntax14">.</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  22:</span>      <span class="syntax8">exit</span><span class="syntax18">(</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  23:</span>    <span class="syntax18">}</span>
<span class="gutter">  24:</span>    <span class="syntax9">fwrite</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">fp</span><span class="syntax18">,</span> <span class="syntax10">$</span><span class="syntax10">outputstring</span><span class="syntax18">,</span> <span class="syntax9">strlen</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">outputstring</span><span class="syntax18">)</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutterH">  25:</span>    <span class="syntax8">echo</span> <span class="syntax14">&quot;</span><span class="syntax14">Output</span><span class="syntax14"> </span><span class="syntax14">was</span><span class="syntax14"> </span><span class="syntax14">sent</span><span class="syntax14"> </span><span class="syntax14">to</span><span class="syntax14"> </span><span class="syntax10">$</span><span class="syntax10">filename</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  26:</span>    <span class="syntax9">fclose</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">fp</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  27:</span>  <span class="syntax17">?&gt;</span>
<span class="gutter">  28:</span>  <span class="syntax17">&lt;/font</span><span class="syntax17">&gt;</span>
<span class="gutter">  29:</span> <span class="syntax17">&lt;/body</span><span class="syntax17">&gt;</span>
<span class="gutterH">  30:</span><span class="syntax17">&lt;/html</span><span class="syntax17">&gt;</span></span>
</PRE>
</div>
</small></blockquote>
<p>
If the fopen() function cannot create or open the file for writing, it is
probably because it does not have write permission in the directory, in which
case an error message would normally occur.
</p><p>
By preceding the statement with the "@" symbol, any errors will be suppressed.
</p><p>
If the fopen() function fails, a filehandle will not be returned.
This line tests to see if there is not a value for $fp, and if not prints the
error message, and exits.
</p></li>
<li><p>
Creating, Copying, Renaming, and Deleting Files
</p><p>
The table below lists functions for creating, copying, renaming, and removing files.
This section examines these functions.
</p><p>
Table: Functions to Manipulate Files
</p>
<blockquote>
<table>
<tr>
<td><code><b><u>
Function</u></b>&nbsp;</code></td>
<td><code><b><u>
Description</u></b></code></td>
</tr><tr>
<td><code>
copy()</code></td>
<td><code>
Copies a file.</code></td>
</tr><tr>
<td><code>
rename()</code></td>
<td><code>
Renames a file.</code></td>
</tr><tr>
<td><code>
touch()</code></td>
<td><code>
Updates its timestamp<br>
(modification and access times)<br>
or creates the file.</code></td>
</tr><tr>
<td><code>
unlink()</code></td>
<td><code>
Removes a file.</code></td>
</tr>
</table>
</blockquote>
</li>
<li><p>
The copy() FunctionMaking a Copy of a File
</p><p>
To make a copy of a file, the <b>copy()</b> function is used. The copy()
function will return true if the file was correctly copied, or false if
there was an error.
</p><p>
To copy a file, you will need write permission on the directory where the new
copy will be stored.
</p><p>
Format:
</p>
<code><small>
bool copy(string source_file,string destination_file)<br>
</small></code>
<h4>
Filename: copyFile.php
</h4>
<blockquote><small>
<div class="disp2">
<PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;html</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span> <span class="syntax17">&lt;head</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;title</span><span class="syntax17">&gt;</span>Copy a File<span class="syntax17">&lt;/title</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;/head</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span> <span class="syntax17">&lt;body</span><span class="syntax17"> </span><span class="syntax17">bgcolor</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">lavender</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span>  <span class="syntax17">&lt;?php</span>
<span class="gutterH">   5:</span>    <span class="syntax10">$</span><span class="syntax10">oldfilename</span> <span class="syntax18">=</span> <span class="syntax10">$</span><span class="syntax10">_SERVER</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">DOCUMENT_ROOT</span><span class="syntax13">'</span><span class="syntax18">]</span> <span class="syntax18">.</span><span class="syntax13">'</span><span class="syntax13">/files/datebook.txt</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">   6:</span>    <span class="syntax10">$</span><span class="syntax10">newfilename</span> <span class="syntax18">=</span> <span class="syntax10">$</span><span class="syntax10">_SERVER</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">DOCUMENT_ROOT</span><span class="syntax13">'</span><span class="syntax18">]</span> <span class="syntax18">.</span><span class="syntax13">'</span><span class="syntax13">/files/datebook.bck</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">   7:</span>    <span class="syntax8">if</span><span class="syntax18"> (</span><span class="syntax18">!</span><span class="syntax9">copy</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">oldfilename</span><span class="syntax18">,</span> <span class="syntax10">$</span><span class="syntax10">newfilename</span><span class="syntax18">)</span><span class="syntax18">)</span> <span class="syntax18">{</span>
<span class="gutter">   8:</span>      <span class="syntax8">exit</span><span class="syntax18">(</span><span class="syntax14">&quot;</span><span class="syntax14">Copy</span><span class="syntax14"> </span><span class="syntax14">of</span><span class="syntax14"> </span><span class="syntax10">$</span><span class="syntax10">oldfilename</span><span class="syntax14"> </span><span class="syntax14">failed</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">   9:</span>    <span class="syntax18">}</span>
<span class="gutterH">  10:</span>    <span class="syntax8">else</span> <span class="syntax18">{</span> <span class="syntax8">echo</span> <span class="syntax14">&quot;</span><span class="syntax14">Copy</span><span class="syntax14"> </span><span class="syntax14">of</span><span class="syntax14"> </span><span class="syntax10">$</span><span class="syntax10">oldfilename</span><span class="syntax14"> </span><span class="syntax14">succeeded</span><span class="syntax14">!</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span><span class="syntax18">}</span>
<span class="gutter">  11:</span>  <span class="syntax17">?&gt;</span>
<span class="gutter">  12:</span> <span class="syntax17">&lt;/body</span><span class="syntax17">&gt;</span>
<span class="gutter">  13:</span><span class="syntax17">&lt;/html</span><span class="syntax17">&gt;</span></span>
</PRE>
</div>
</small></blockquote>
<p>
The original file $oldfilename must exist or the copy will fail.
</p><p>
The destination file $newfilename will be created.
If the copy fails, an error will be printed and the program will exit.
</p></li>
<li><p>
The rename() FunctionRenaming and/or Moving a File
</p><p>
The <b>rename()</b> function is used to give a file or directory another name.
</p><p>
If the destination file is in another directory, then you are essentially
moving the file. It returns true on success, and false if it fails.
</p><p>
Format:
</p>
<code><small>
bool rename(string old_file,string new_file)<br>
</small></code>
<p>
Example:
</p>
<code><small>
rename('/tmp/tmpfile','/home/ellie/examples/data.txt');<br>
</small></code>
</li>
<li><p>
The unlink() FunctionRemoving a File
</p><p>
The <b>unlink()</b> function is used to remove a file. It returns true if it
can remove the file and false if not.
</p><p>
Format:
</p>
<code><small>
bool unlink ( string filename [, resource context] )<br>
</small></code>
<p>
Example:
</p>
<code><small>
unlink('datafile.txt'); // Deletes the file from the directory<br>
</small></code>
</li>
<li><p>
Directories
</p><p>
PHP supports a number of functions to allow you to work with directories in the
file system.
</p><p>
From a PHP script, you can open a directory and read its contents.
This is similar to the UNIX/Linux <b>ls</b> command or the DOS/Windows
<b>dir</b> command.
</p><p>
You can change to a new directory, list the current working directory,
remove a directory, and so on. The following table lists functions that will
be used in the following examples.
</p><p>
Table: PHP Directory Functions
</p>
<table>
<tr>
<td><code><b><u>
Function</u></b></code></td>
<td><code><b><u>
Description</u></b></code></td>
</tr><tr>
<td><code>
chdir()</code></td>
<td><code>
Changes the directory.</code></td>
</tr><tr>
<td><code>
chroot()</code></td>
<td><code>
Changes the root directory.</code></td>
</tr><tr>
<td><code>
closedir()</code></td>
<td><code>
Closes a directory handle previously opened with opendir().</code></td>
</tr><tr>
<td><code>
getcwd()</code></td>
<td><code>
Gets the current working directory.</code></td>
</tr><tr>
<td><code>
opendir()</code></td>
<td><code>
Returns a directory handle that can be used with readdir(),
closedir(), and rewinddir().</code></td>
</tr><tr>
<td><code>
readdir()</code></td>
<td><code>
Reads the next file from a directory handle opened with opendir().</code></td>
</tr><tr>
<td><code>
rewinddir()&nbsp;</code></td>
<td><code>
Rewinds directory handle pointer to the beginning of the directory.</code></td>
</tr><tr>
<td><code>
rmdir()</code></td>
<td><code>
Deletes a directory. It must be empty and have write permission.</code></td>
</tr><tr>
<td><code>
scandir()</code></td>
<td><code>
Returns an array of files and directories from a given path.</code></td>
</tr><tr>
<td><code>
unlink()</code></td>
<td><code>
Deletes a file from a directory.</code></td>
</tr>
</table>
</li>
<li><p>
Opening and Reading from a Directory
</p><p>
When you open a directory with the <b>opendir()</b> function, you create a
directory handle to allow access to the directory as it is stored on the disk
by the operating system regardless of its internal structure.
</p><p>
Once it is opened, you can access the directory with the PHP functions listed above.
</p></li>
<li><p>
The opendir() Function
</p><p>
The <b>opendir()</b> function is used to open a directory, similar to the
fopen() function for opening files. Once a handle to the directory is returned,
the other directory functions, such as readdir(), rewindir(), and closedir(),
can be applied to the directory filehandle.
If the directory cannot be opened, false will be returned.
</p><p>
Format:
</p>
<code><small>
resource opendir ( string path [, resource context] )<br>
</small></code>
<p>
Example:
</p>
<code><small>
// $dirhandle is a resource similar to a filehandle<br>
$dirhandle = opendir('/home/john');<br>
</small></code>
</p></li>
<li><p>
The readdir() Function
</p><p>
A directory can be read by anyone who has read permission on the directory.
When we speak of reading a directory, we are talking about looking at its
contents with the <b>readdir()</b> function.
</p><p>
readdir() reads an entry from a directory handle, given as its argument,
and returns the name of a file from the directory. Each file appears in the
order in which it is stored by the file system on the disk.
</p><p>
You can use this function in a loop to list the contents of the entire directory,
one file at at time.
</p><p>
The readdir() function returns either a filename, or false if it fails.
If it succeeds, it moves its internal pointer to the next file in the directory,
until it reaches the end of the list.
</p><p>
Format:
</p>
<blockquote><code><small>
string readdir ( resource dir_handle )<br>
</small></code></blockquote>
<p>
Example:
</p>
<code><small>
$dirhandle = opendir('/home');<br>
// Gets one file from the directory. Use a loop to get them all<br>
$one_file = readdir($dirhandle);<br>
</small></code>
<h4>
Filename: readdir.php
</h4>
<blockquote><small>
<div class="disp2">
<PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;html</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span> <span class="syntax17">&lt;head</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span>  <span class="syntax17">&lt;title</span><span class="syntax17">&gt;</span>Directory Functions<span class="syntax17">&lt;/title</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span> <span class="syntax17">&lt;/head</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span> <span class="syntax17">&lt;body</span><span class="syntax17"> </span><span class="syntax17">bgcolor</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">aqua</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   6:</span>  <span class="syntax17">&lt;font</span><span class="syntax17"> </span><span class="syntax17">face</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">verdana</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   7:</span>  <span class="syntax17">&lt;h3</span><span class="syntax17">&gt;</span>Listing the Contents of a Directory<span class="syntax17">&lt;/h3</span><span class="syntax17">&gt;</span>
<span class="gutter">   8:</span>  <span class="syntax17">&lt;?php</span>
<span class="gutter">   9:</span>    <span class="syntax10">$</span><span class="syntax10">dirhandle</span> <span class="syntax18">=</span> <span class="syntax9">opendir</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">_SERVER</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">DOCUMENT_ROOT</span><span class="syntax13">'</span><span class="syntax18">]</span> <span class="syntax18">.</span><span class="syntax13">'</span><span class="syntax13">/files</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutterH">  10:</span>    <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">List</span><span class="syntax2"> </span><span class="syntax2">all</span><span class="syntax2"> </span><span class="syntax2">files</span><span class="syntax2"> </span><span class="syntax2">in</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">directory</span>
<span class="gutter">  11:</span>    <span class="syntax8">while</span><span class="syntax18"> (</span><span class="syntax8">FALSE</span> <span class="syntax18">!</span><span class="syntax18">=</span><span class="syntax18">=</span><span class="syntax18"> (</span><span class="syntax10">$</span><span class="syntax10">file</span> <span class="syntax18">=</span> <span class="syntax9">readdir</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">dirhandle</span><span class="syntax18">)</span><span class="syntax18">)</span><span class="syntax18">)</span> <span class="syntax18">{</span>
<span class="gutter">  12:</span>      <span class="syntax8">echo</span> <span class="syntax10">$</span><span class="syntax10">file</span><span class="syntax18">,</span><span class="syntax13">'</span><span class="syntax13">&lt;br</span><span class="syntax13"> </span><span class="syntax13">/&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">  13:</span>    <span class="syntax18">}</span>
<span class="gutter">  14:</span>    <span class="syntax9">closedir</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">dirhandle</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutterH">  15:</span>  <span class="syntax17">?&gt;</span>
<span class="gutter">  16:</span>  <span class="syntax17">&lt;/font</span><span class="syntax17">&gt;</span>
<span class="gutter">  17:</span> <span class="syntax17">&lt;/body</span><span class="syntax17">&gt;</span>
<span class="gutter">  18:</span><span class="syntax17">&lt;/html</span><span class="syntax17">&gt;</span></span>
</PRE>
</div>
</small></blockquote>
<p>
The opendir() function returns a directory handle.
</p><p>
The format for this loop is recommended as the correct method to loop through the
directory in the PHP manual with this explanation: "We are explicitly testing
whether the return value is identical to ... FALSE since otherwise, any directory
entry whose name evaluates to FALSE will stop the loop (e.g., a directory named 0).
</p></li>
<li><p>
Getting Path Information
</p><p>
The <b>dirname()</b> function returns the name of the directory from a path
name and the <b>basename()</b> function returns the name of a file without
the directory component. A dot indicates the current working directory.
</p><p>
Format:
</p>
<blockquote><code><small>
string dirname ( string path )<br>
</small></code></blockquote>
<p>
Example:
</p>
<blockquote><code><small>
$path = '/etc/passwd';<br>
// $file is set to "/etc"<br>
$file = dirname($path);<br>
</small></code></blockquote>
<h4>
Filename: path.php
</h4>
<blockquote><small>
<div class="disp2">
<PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;html</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span> <span class="syntax17">&lt;head</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span>  <span class="syntax17">&lt;title</span><span class="syntax17">&gt;</span>Directory and File Names<span class="syntax17">&lt;/title</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span> <span class="syntax17">&lt;/head</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span> <span class="syntax17">&lt;body</span><span class="syntax17"> </span><span class="syntax17">bgcolor</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">lavender</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   6:</span>  <span class="syntax17">&lt;?php</span>
<span class="gutter">   7:</span>    <span class="syntax10">$</span><span class="syntax10">path</span> <span class="syntax18">=</span> <span class="syntax10">$</span><span class="syntax10">_SERVER</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">DOCUMENT_ROOT</span><span class="syntax13">'</span><span class="syntax18">]</span> <span class="syntax18">.</span><span class="syntax13">'</span><span class="syntax13">/files/data.txt</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">   8:</span>    <span class="syntax8">echo</span> <span class="syntax13">'</span><span class="syntax13">The</span><span class="syntax13"> </span><span class="syntax13">full</span><span class="syntax13"> </span><span class="syntax13">file</span><span class="syntax13"> </span><span class="syntax13">name</span><span class="syntax13"> </span><span class="syntax13">is:&lt;br</span><span class="syntax13"> </span><span class="syntax13">/&gt;</span><span class="syntax13">'</span><span class="syntax18">;</span>
<span class="gutter">   9:</span>    <span class="syntax8">echo</span> <span class="syntax10">$</span><span class="syntax10">path</span> <span class="syntax18">.</span><span class="syntax14">&quot;</span><span class="syntax14">\n</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutterH">  10:</span>    <span class="syntax8">echo</span> <span class="syntax9">dirname</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">path</span><span class="syntax18">)</span><span class="syntax18">,</span><span class="syntax14">&quot;</span><span class="syntax14">\n</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  11:</span>    <span class="syntax8">echo</span> <span class="syntax9">basename</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">path</span><span class="syntax18">)</span><span class="syntax18">,</span> <span class="syntax14">&quot;</span><span class="syntax14">\n</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  12:</span>  <span class="syntax17">?&gt;</span>
<span class="gutter">  13:</span> <span class="syntax17">&lt;/body</span><span class="syntax17">&gt;</span>
<span class="gutter">  14:</span><span class="syntax17">&lt;/html</span><span class="syntax17">&gt;</span></span>
</PRE>
</div>
</small></blockquote>
<p>
The dirname() function returns the directory where the file is found,
and the basename() function returns the filename portion of the path.
</p></li>
<li><p>
Changing and Getting the Current Directory
</p><p>
The <b>chdir()</b> function changes to a specified directory. You can use
either relative or absolute path names. The function returns true on success,
and false on failure.
</p><p>
The <b>getcwd()</b> function returns the path to the current working directory
if successful, and false if not.
</p><p>
Format:
</p>
<blockquote><code><small>
bool chdir ( string directory )<br>
</small></code></blockquote>
<p>
Example:
</p>
<blockquote><code><small>
chdir('/usr/local/lib');<br>
</small></code></blockquote>
<h4>
Filename: getDir.php
</h4>
<blockquote><small>
<div class="disp2">
<PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;html</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span> <span class="syntax17">&lt;head</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span>  <span class="syntax17">&lt;title</span><span class="syntax17">&gt;</span>Change and Get Directories<span class="syntax17">&lt;/title</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span> <span class="syntax17">&lt;/head</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span> <span class="syntax17">&lt;body</span><span class="syntax17"> </span><span class="syntax17">bgcolor</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">lavender</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   6:</span>  <span class="syntax17">&lt;?php</span>
<span class="gutter">   7:</span>    <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">Get</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">current</span><span class="syntax2"> </span><span class="syntax2">directory</span>
<span class="gutter">   8:</span>    <span class="syntax8">echo</span> <span class="syntax9">getcwd</span><span class="syntax18">(</span><span class="syntax18">)</span><span class="syntax18">,</span><span class="syntax14">&quot;</span><span class="syntax14">\n</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">   9:</span>    <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">Change</span><span class="syntax2"> </span><span class="syntax2">directory;</span><span class="syntax2"> </span><span class="syntax2">go</span><span class="syntax2"> </span><span class="syntax2">up</span><span class="syntax2"> </span><span class="syntax2">one</span><span class="syntax2"> </span><span class="syntax2">level</span>
<span class="gutterH">  10:</span>    <span class="syntax9">chdir</span><span class="syntax18">(</span><span class="syntax14">&quot;</span><span class="syntax14">.</span><span class="syntax14">.</span><span class="syntax14">&quot;</span><span class="syntax18">)</span><span class="syntax18">;</span> 
<span class="gutter">  11:</span>    <span class="syntax8">echo</span> <span class="syntax9">getcwd</span><span class="syntax18">(</span><span class="syntax18">)</span><span class="syntax18">,</span><span class="syntax14">&quot;</span><span class="syntax14">\n</span><span class="syntax14">&lt;</span><span class="syntax14">br</span><span class="syntax14"> </span><span class="syntax14">/</span><span class="syntax14">&gt;</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutter">  12:</span>  <span class="syntax17">?&gt;</span>
<span class="gutter">  13:</span> <span class="syntax17">&lt;/body</span><span class="syntax17">&gt;</span>
<span class="gutter">  14:</span><span class="syntax17">&lt;/html</span><span class="syntax17">&gt;</span></span>
</PRE>
</div>
</small></blockquote>
<p>
The getcwd() function returns the current working directory, and the
chdir() function changes the current directory to the one specified as its argument.
In this example, the two dots represent a relative path to the parent directory.
</p></li>
<li><p>
Managing Content with Include Files
</p><p>
As your site adds more pages, you will find it easier to maintain if you manage
the content with template files, external files that separate the content,
HTML client-side instructions, from the application, the PHP server-side
programming instructions.
</p><p>
Creating a structure for your site will not only make it more manageable for
designers and programmers, but easier to navigate and debug.
This section focuses on how to include simple files to help manage content.
</p><p>
Note: There are many templating solutions available for PHP today,
easily found on the Web.
See <a href="http://smarty.php.net">http://smarty.php.net</a>
to find about Smarty, a template engine designed for PHP.
</p><p>
To include files in your PHP program, the PHP <b>include()</b> and <b>require()</b>
functions are used. When a file is included, it is similar to a copy and paste operation.
</p><p>
The contents of the included or required file are read into the file in the
same way. A convention is to name the included file with a <b>.inc</b> or <b>.inc.php</b>
extension. It is recommended that include files containing sensitive information
such as database usernames and passwords be stored in a directory outside the
document tree.
</p><p>
The require() and include() statements are identical in every way except how
they handle failure. The include() produces only a warning if the file cannot
be found, whereas require() results in a fatal error causing the program to die.
</p><p>
Note: Be sure that the file you include or require can be located by updating
the <b>include_path</b> directive in the php.ini configuration file.
</p><p>
Examples:
</p>
<code><small>
// Replaces instances of require with the contents of file;<br>
// fatal error if file is missing<br>
require('copyright.inc');<br><br>
// Replaces only first instance of require with contents of file<br>
require_once('header.inc.php');<br><br>
// Same as replace() but produces a warning if file is missing<br>
include('disclaimer.inc.php');<br><br>
// Happens only once during program execution<br>
include_once('footer.inc.php');<br>
</small></code>
</li>
<li><p>
A Real-World Example
</p><p>
In the following example, we create a file called <b>header.inc.php</b> that
contains the HTML design for the top of the Web page.
</p><p>
Next, we create the page that contains the body of the document, that is,
the PHP instructions to open a database to retrieve and display information.
</p><p>
And finally we create the footer page, called <b>footer.inc.php</b> with copyright
information to appear at the bottom of the page.
</p><p>
If, in the body of the page, the requested data cannot be found, the user will
be directed to another page called: <b>page_not_found.html</b>
</p><p>
Let's start by displaying the complete Web page and then break it down into its
separate components. All of the pages used to create the complete Web page will
be stored in separate files.
</p>
<h4>
Filename: header.inc.php - The header file
</h4>
<blockquote><small>
<div class="disp2">
<PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;!</span><span class="syntax9">DOCTYPE</span><span class="syntax9"> </span><span class="syntax9">html</span><span class="syntax9"> </span><span class="syntax9">PUBLIC</span><span class="syntax9"> </span><span class="syntax13">&quot;</span><span class="syntax13">-//W3C//DTD</span><span class="syntax13"> </span><span class="syntax13">XHTML</span><span class="syntax13"> </span><span class="syntax13">1.0</span><span class="syntax13"> </span><span class="syntax13">Strict//EN</span><span class="syntax13">&quot;</span><span class="syntax9"> </span><span class="syntax13">&quot;</span><span class="syntax13">http://</span>
<span class="gutter">   2:</span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13">www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   3:</span><span class="syntax17">&lt;html</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span> <span class="syntax17">&lt;head</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span>  <span class="syntax17">&lt;title</span><span class="syntax17">&gt;</span>Acme Toys<span class="syntax17">&lt;/title</span><span class="syntax17">&gt;</span>
<span class="gutter">   6:</span> <span class="syntax17">&lt;/head</span><span class="syntax17">&gt;</span>
<span class="gutter">   7:</span> <span class="syntax1">&lt;!--</span><span class="syntax1"> </span><span class="syntax1">BODY</span><span class="syntax1"> </span><span class="syntax1">--&gt;</span>
<span class="gutter">   8:</span> <span class="syntax17">&lt;BODY</span><span class="syntax17"> </span><span class="syntax17">text</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">#</span><span class="syntax14">000000</span><span class="syntax14">&quot;</span><span class="syntax17"> </span><span class="syntax17">BGCOLOR</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">#</span><span class="syntax14">ffffff</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   9:</span>  <span class="syntax17">&lt;center</span><span class="syntax17">&gt;</span>
<span class="gutterH">  10:</span>  <span class="syntax1">&lt;!--</span><span class="syntax1"> </span><span class="syntax1">HEADER</span><span class="syntax1"> </span><span class="syntax1">--&gt;</span>
<span class="gutter">  11:</span>  <span class="syntax17">&lt;table</span><span class="syntax17"> </span><span class="syntax17">width</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">90</span><span class="syntax14">%</span><span class="syntax14">&quot;</span><span class="syntax17"> </span><span class="syntax17">height</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">100</span><span class="syntax14">%</span><span class="syntax14">&quot;</span><span class="syntax17"> </span><span class="syntax17">cellspacing</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">0</span><span class="syntax14">&quot;</span>
<span class="gutter">  12:</span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17">cellpadding</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">0</span><span class="syntax14">&quot;</span><span class="syntax17"> </span><span class="syntax17">border</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">0</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">  13:</span>   <span class="syntax17">&lt;tr</span><span class="syntax17"> </span><span class="syntax17">bgcolor</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">green</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;td</span><span class="syntax17"> </span><span class="syntax17">align</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">center</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  14:</span>    <span class="syntax17">&lt;font</span><span class="syntax17"> </span><span class="syntax17">face</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">Arial</span><span class="syntax14">&quot;</span><span class="syntax17"> </span><span class="syntax17">size</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">5</span><span class="syntax14">&quot;</span><span class="syntax17"> </span><span class="syntax17">style=&quot;</span>bold<span class="syntax17">&quot;</span><span class="syntax17"> </span><span class="syntax17">color</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">white</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutterH">  15:</span>    ACME Toys<span class="syntax17">&lt;/font</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  16:</span>    <span class="syntax17">&lt;/td</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;/tr</span><span class="syntax17">&gt;</span>
<span class="gutter">  17:</span>   <span class="syntax17">&lt;tr</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;td</span><span class="syntax17"> </span><span class="syntax17">valign</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">top</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  18:</span>   <span class="syntax1">&lt;!--</span><span class="syntax1"> </span><span class="syntax1">Main</span><span class="syntax1"> </span><span class="syntax1">Content</span><span class="syntax1"> </span><span class="syntax1">--&gt;</span></span>
</PRE>
</div>
</small></blockquote>
<p>
This is the HTML page that creates the header of the Web page.
You can see that it consists of a green table, with a white arial font,
centered and vertically aligned at the top of the page.
</p>
<h4>
Filename: page.php - The main page
</h4>
<blockquote><small>
<div class="disp2">
<PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax17">&lt;?php</span>
<span class="gutter">   2:</span>  <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">Get</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">page</span><span class="syntax2"> </span><span class="syntax2">name</span><span class="syntax2"> </span><span class="syntax2">passed</span><span class="syntax2"> </span><span class="syntax2">in</span>
<span class="gutter">   3:</span>  <span class="syntax10">$</span><span class="syntax10">page_name</span> <span class="syntax18">=</span> <span class="syntax10">$</span><span class="syntax10">_REQUEST</span><span class="syntax18">[</span><span class="syntax13">'</span><span class="syntax13">name</span><span class="syntax13">'</span><span class="syntax18">]</span><span class="syntax18">;</span>
<span class="gutter">   4:</span>  <span class="syntax1">/*</span><span class="syntax1"> </span><span class="syntax1">http://localhost/demo166/page.php?name=about_us</span><span class="syntax1"> </span><span class="syntax1">*/</span>
<span class="gutterH">   5:</span>
<span class="gutter">   6:</span>  <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">Get</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">body</span><span class="syntax2"> </span><span class="syntax2">of</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">page</span>
<span class="gutter">   7:</span>  <span class="syntax9">mysql_connect</span><span class="syntax18">(</span><span class="syntax14">&quot;</span><span class="syntax14">localhost</span><span class="syntax14">&quot;</span><span class="syntax18">,</span><span class="syntax14">&quot;</span><span class="syntax14">djefferson</span><span class="syntax14">&quot;</span><span class="syntax18">,</span><span class="syntax14">&quot;</span><span class="syntax14">dino1234</span><span class="syntax14">&quot;</span><span class="syntax18">)</span> <span class="syntax18">or</span> <span class="syntax8">die</span><span class="syntax18">(</span><span class="syntax9">mysql_error</span><span class="syntax18">(</span><span class="syntax18">)</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">   8:</span>  <span class="syntax9">mysql_select_db</span><span class="syntax18">(</span><span class="syntax14">&quot;</span><span class="syntax14">acme</span><span class="syntax14">&quot;</span><span class="syntax18">)</span> <span class="syntax18">or</span> <span class="syntax8">die</span><span class="syntax18">(</span><span class="syntax9">mysql_error</span><span class="syntax18">(</span><span class="syntax18">)</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">   9:</span>  <span class="syntax10">$</span><span class="syntax10">sql</span> <span class="syntax18">=</span> <span class="syntax14">&quot;</span><span class="syntax14">SELECT</span><span class="syntax14"> </span><span class="syntax14">*</span><span class="syntax14"> </span><span class="syntax14">from</span><span class="syntax14"> </span><span class="syntax14">pages</span><span class="syntax14"> </span><span class="syntax14">WHERE</span><span class="syntax14"> </span><span class="syntax14">name</span><span class="syntax14">=</span><span class="syntax14">'</span><span class="syntax10">$</span><span class="syntax10">page_name</span><span class="syntax14">'</span><span class="syntax14">&quot;</span><span class="syntax18">;</span>
<span class="gutterH">  10:</span>  <span class="syntax1">/*</span>
<span class="gutter">  11:</span><span class="syntax1">--------------What</span><span class="syntax1"> </span><span class="syntax1">is</span><span class="syntax1"> </span><span class="syntax1">being</span><span class="syntax1"> </span><span class="syntax1">selected</span><span class="syntax1"> </span><span class="syntax1">from</span><span class="syntax1"> </span><span class="syntax1">the</span><span class="syntax1"> </span><span class="syntax1">database--------------</span>
<span class="gutter">  12:</span><span class="syntax1">+----------+------------------------------------------------------------------------+</span>
<span class="gutter">  13:</span><span class="syntax1">|name</span><span class="syntax1"> </span><span class="syntax1"> </span><span class="syntax1"> </span><span class="syntax1"> </span><span class="syntax1"> </span><span class="syntax1"> </span><span class="syntax1">|</span><span class="syntax1"> </span><span class="syntax1">body</span>
<span class="gutter">  14:</span><span class="syntax1">|</span>
<span class="gutterH">  15:</span><span class="syntax1">+----------+------------------------------------------------------------------------+</span>
<span class="gutter">  16:</span><span class="syntax1">|about_us</span><span class="syntax1"> </span><span class="syntax1"> </span><span class="syntax1">|</span><span class="syntax1"> </span><span class="syntax1">&lt;h1&gt;About</span><span class="syntax1"> </span><span class="syntax1">Us&lt;/h1&gt;</span><span class="syntax1"> </span><span class="syntax1">ACME</span><span class="syntax1"> </span><span class="syntax1">Toys</span><span class="syntax1"> </span><span class="syntax1">has</span><span class="syntax1"> </span><span class="syntax1">been</span><span class="syntax1"> </span><span class="syntax1">established</span><span class="syntax1"> </span><span class="syntax1">in</span><span class="syntax1"> </span><span class="syntax1">1850</span><span class="syntax1"> </span><span class="syntax1">to</span><span class="syntax1"> </span><span class="syntax1">provide</span><span class="syntax1"> </span><span class="syntax1">toys</span>
<span class="gutter">  17:</span><span class="syntax1">|</span><span class="syntax1"> </span><span class="syntax1"> </span><span class="syntax1"> </span><span class="syntax1"> </span><span class="syntax1"> </span><span class="syntax1"> </span><span class="syntax1"> </span><span class="syntax1"> </span><span class="syntax1"> </span><span class="syntax1"> </span><span class="syntax1">|</span><span class="syntax1"> </span><span class="syntax1">to</span><span class="syntax1"> </span><span class="syntax1">children</span><span class="syntax1"> </span><span class="syntax1">all</span><span class="syntax1"> </span><span class="syntax1">over</span><span class="syntax1"> </span><span class="syntax1">the</span><span class="syntax1"> </span><span class="syntax1">world</span>
<span class="gutter">  18:</span><span class="syntax1">+----------+------------------------------------------------------------------------+</span>
<span class="gutter">  19:</span><span class="syntax1">1</span><span class="syntax1"> </span><span class="syntax1">row</span><span class="syntax1"> </span><span class="syntax1">in</span><span class="syntax1"> </span><span class="syntax1">set</span><span class="syntax1"> </span><span class="syntax1">(0.00</span><span class="syntax1"> </span><span class="syntax1">sec)</span>
<span class="gutterH">  20:</span><span class="syntax1">----------------------------------------------------------------------</span>
<span class="gutter">  21:</span><span class="syntax1"> </span><span class="syntax1"> </span><span class="syntax1">*/</span>
<span class="gutter">  22:</span>  <span class="syntax10">$</span><span class="syntax10">result</span> <span class="syntax18">=</span> <span class="syntax9">mysql_query</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">sql</span><span class="syntax18">)</span> <span class="syntax18">or</span> <span class="syntax8">die</span><span class="syntax18">(</span><span class="syntax9">mysql_error</span><span class="syntax18">(</span><span class="syntax18">)</span> <span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  23:</span>  <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">If</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">page</span><span class="syntax2"> </span><span class="syntax2">is</span><span class="syntax2"> </span><span class="syntax2">not</span><span class="syntax2"> </span><span class="syntax2">found,</span><span class="syntax2"> </span><span class="syntax2">redirect</span><span class="syntax2"> </span><span class="syntax2">to</span><span class="syntax2"> </span><span class="syntax2">a</span><span class="syntax2"> </span><span class="syntax2">static</span><span class="syntax2"> </span><span class="syntax2">page</span>
<span class="gutter">  24:</span>  <span class="syntax8">if</span><span class="syntax18"> (</span><span class="syntax9">mysql_num_rows</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">result</span><span class="syntax18">)</span> <span class="syntax18">=</span><span class="syntax18">=</span> <span class="syntax5">0</span> <span class="syntax18">)</span> <span class="syntax18">{</span>
<span class="gutterH">  25:</span>    <span class="syntax9">header</span><span class="syntax18">(</span><span class="syntax14">&quot;</span><span class="syntax14">Location</span><span class="syntax14">:</span><span class="syntax14"> </span><span class="syntax14">page_not_found</span><span class="syntax14">.</span><span class="syntax14">html</span><span class="syntax14">&quot;</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  26:</span>    <span class="syntax8">exit</span><span class="syntax18">(</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  27:</span>  <span class="syntax18">}</span>
<span class="gutter">  28:</span>  <span class="syntax10">$</span><span class="syntax10">row</span> <span class="syntax18">=</span> <span class="syntax9">mysql_fetch_assoc</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">result</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  29:</span>  <span class="syntax10">$</span><span class="syntax10">body</span> <span class="syntax18">=</span> <span class="syntax9">stripslashes</span><span class="syntax18">(</span><span class="syntax10">$</span><span class="syntax10">row</span><span class="syntax18">[</span><span class="syntax14">&quot;</span><span class="syntax14">body</span><span class="syntax14">&quot;</span><span class="syntax18">]</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutterH">  30:</span>
<span class="gutter">  31:</span>  <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">Include</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">header</span>
<span class="gutter">  32:</span>  <span class="syntax8">include</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">header.inc.php</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  33:</span>
<span class="gutter">  34:</span>  <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">Print</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">body</span><span class="syntax2"> </span><span class="syntax2">of</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">page</span>
<span class="gutterH">  35:</span>  <span class="syntax8">echo</span> <span class="syntax10">$</span><span class="syntax10">body</span><span class="syntax18">;</span>
<span class="gutter">  36:</span>
<span class="gutter">  37:</span>  <span class="syntax2">//</span><span class="syntax2"> </span><span class="syntax2">Include</span><span class="syntax2"> </span><span class="syntax2">the</span><span class="syntax2"> </span><span class="syntax2">footer</span>
<span class="gutter">  38:</span>  <span class="syntax8">include</span><span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">footer.inc.php</span><span class="syntax13">'</span><span class="syntax18">)</span><span class="syntax18">;</span>
<span class="gutter">  39:</span><span class="syntax17">?&gt;</span>
</span></PRE>
</div>
</small></blockquote>
<p>
On line 3, The $_REQUEST['name'] value is sent via the GET method from the URL of this
program where the user types a question mark and the name of the page he or she
wants to visit (see the next commented line); in this case, the name of the page
is <b>about_us</b> . The variable $page_name is assigned about_us.
</p><p>
Even though the MySQL database system is not discussed in this unit, we use it
here to provide a more real-world example.
</p><p>
All you really need to understand is that the the PHP script makes a connection
to a database and fetches data from it that will be displayed in the browser.
</p><p>
On line 7, the PHP <b>mysql_connect()</b> function attempts to open a connection to
the MySQL database server on this computer (localhost) with a user and password
that have access to the "acme" schema. If the connection fails, the program will die.
</p><p>
If the connection is successful, the "acme" database is selected on line 8
and ready for use.
</p><p>
Line 9 contains an SQL select statement that says, "Select all fields from the
<b>pages</b> table where the <b>name</b> column is $page_name, that is,
"about_us". The variable $sql is assigned the query string.
</p><p>
The commented block (lines 10-21) is just to show you the actual "pages" table
in the "acme" database to help understand what will be displayed as the body
of this page.
</p><p>
On line 22, the query is executed on the "acme" database, a result is returned,
that is a reference to the rows that were retrieved.
</p><p>
If no rows were retrieved from the "pages" table, the user is redirected to a
new page, called <b>page_not_found.html</b>, letting him or her know that the 
request failed.
</p><p>
The <b>mysql_fetch_assoc()</b> function on line 28 fetches a row from the database table
and returns an associative array, called $row, consisting of the name of the
table column and the value associated with it.
</p><p>
The variable $body, on line 29, is assigned the value that came from the
database column named "body".
</p><p>
On line 32, the contents of "header.inc.php" are inserted into the file to
replace the include line. It is just as if we had cut and pasted the file right
at this point in the current file.
</p><p>
The body of the document is displayed by line 35. The value of $body in this
example is what was retrieved from the "body" field of the "acme" database.
</p><p>
The contents of "footer.inc.php" are inserted into the file by line 38 to
replace the include line.
</p>
<h4>
Filename: page_not_found.html - The redirection page
</h4>
<blockquote><small>
<div class="disp2">
<PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax9">&lt;!</span><span class="syntax9">DOCTYPE</span><span class="syntax9"> </span><span class="syntax9">html</span><span class="syntax9"> </span><span class="syntax9">PUBLIC</span><span class="syntax9"> </span><span class="syntax13">&quot;</span><span class="syntax13">-//W3C//DTD</span><span class="syntax13"> </span><span class="syntax13">XHTML</span><span class="syntax13"> </span><span class="syntax13">1.0</span><span class="syntax13"> </span><span class="syntax13">Strict//EN</span><span class="syntax13">&quot;</span><span class="syntax9"> </span><span class="syntax13">&quot;</span><span class="syntax13">http://</span>
<span class="gutter">   2:</span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13"> </span><span class="syntax13">www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd</span><span class="syntax13">&quot;</span><span class="syntax9">&gt;</span>
<span class="gutter">   3:</span><span class="syntax17">&lt;</span><span class="syntax17">html</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span> <span class="syntax17">&lt;</span><span class="syntax17">head</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span>  <span class="syntax17">&lt;</span><span class="syntax17">title</span><span class="syntax17">&gt;</span>Acme Toys<span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">title</span><span class="syntax17">&gt;</span>
<span class="gutter">   6:</span> <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">head</span><span class="syntax17">&gt;</span>
<span class="gutter">   7:</span> <span class="syntax1">&lt;!--</span><span class="syntax1"> </span><span class="syntax1">BODY</span><span class="syntax1"> </span><span class="syntax1">--&gt;</span>
<span class="gutter">   8:</span> <span class="syntax17">&lt;</span><span class="syntax17">BODY</span><span class="syntax17"> </span><span class="syntax17">text</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">#000000</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">BGCOLOR</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">#ffffff</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   9:</span>  <span class="syntax17">&lt;</span><span class="syntax17">center</span><span class="syntax17">&gt;</span>
<span class="gutterH">  10:</span>  <span class="syntax1">&lt;!--</span><span class="syntax1"> </span><span class="syntax1">HEADER</span><span class="syntax1"> </span><span class="syntax1">--&gt;</span>
<span class="gutter">  11:</span>  <span class="syntax17">&lt;</span><span class="syntax17">table</span><span class="syntax17"> </span><span class="syntax17">width</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">90%</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">height</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">100%</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">cellspacing</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">0</span><span class="syntax13">&quot;</span>
<span class="gutter">  12:</span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17"> </span><span class="syntax17">cellpadding</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">0</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">border</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">0</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">  13:</span>   <span class="syntax17">&lt;</span><span class="syntax17">tr</span><span class="syntax17"> </span><span class="syntax17">bgcolor</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">green</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;</span><span class="syntax17">td</span><span class="syntax17"> </span><span class="syntax17">align</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">center</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;</span><span class="syntax17">br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  14:</span>    <span class="syntax17">&lt;</span><span class="syntax17">font</span><span class="syntax17"> </span><span class="syntax17">face</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">Arial</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">size</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">5</span><span class="syntax13">&quot;</span><span class="syntax17"> </span><span class="syntax17">style=&quot;</span>bold<span class="syntax17">&quot;</span><span class="syntax17"> </span><span class="syntax17">color</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">white</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutterH">  15:</span>    ACME Toys<span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">font</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;</span><span class="syntax17">br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;</span><span class="syntax17">br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  16:</span>    <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">td</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">tr</span><span class="syntax17">&gt;</span>
<span class="gutter">  17:</span>   <span class="syntax17">&lt;</span><span class="syntax17">tr</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;</span><span class="syntax17">td</span><span class="syntax17"> </span><span class="syntax17">valign</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">top</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;</span><span class="syntax17">br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span>
<span class="gutter">  18:</span>   <span class="syntax1">&lt;!--</span><span class="syntax1"> </span><span class="syntax1">Main</span><span class="syntax1"> </span><span class="syntax1">Content</span><span class="syntax1"> </span><span class="syntax1">--&gt;</span>
<span class="gutter">  19:</span>   <span class="syntax17">&lt;</span><span class="syntax17">h1</span><span class="syntax17">&gt;</span>Page Not Found<span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">h1</span><span class="syntax17">&gt;</span>
<span class="gutterH">  20:</span>   <span class="syntax17">&lt;</span><span class="syntax17">br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;</span><span class="syntax17">br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;</span><span class="syntax17">hr</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">td</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">tr</span><span class="syntax17">&gt;</span>
<span class="gutter">  21:</span>   <span class="syntax1">&lt;!--</span><span class="syntax1"> </span><span class="syntax1">FOOTER</span><span class="syntax1"> </span><span class="syntax1">--&gt;</span>
<span class="gutter">  22:</span>   <span class="syntax17">&lt;</span><span class="syntax17">tr</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;</span><span class="syntax17">td</span><span class="syntax17"> </span><span class="syntax17">align</span><span class="syntax18">=</span><span class="syntax13">&quot;</span><span class="syntax13">center</span><span class="syntax13">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">  23:</span>     <span class="syntax17">&lt;</span><span class="syntax17">small</span><span class="syntax17">&gt;</span>
<span class="gutter">  24:</span>     ACME Toys. All Rights Reserved.
<span class="gutterH">  25:</span>     <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">small</span><span class="syntax17">&gt;</span>
<span class="gutter">  26:</span>    <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">td</span><span class="syntax17">&gt;</span>
<span class="gutter">  27:</span>   <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">tr</span><span class="syntax17">&gt;</span>
<span class="gutter">  28:</span>  <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">table</span><span class="syntax17">&gt;</span>
<span class="gutter">  29:</span> <span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">body</span><span class="syntax17">&gt;</span>
<span class="gutterH">  30:</span><span class="syntax17">&lt;</span><span class="syntax17">/</span><span class="syntax17">html</span><span class="syntax17">&gt;</span></span>
</PRE>
</div>
</small></blockquote>
<p>
This is the redirection page that is displayed if the number of rows selected
from the database table was 0.
</p>
<h4>
Filename: footer.inc.php - The footer Page
</h4>
<blockquote><small>
<div class="disp2">
<PRE>
<span class="syntax0"><span class="gutter">   1:</span>   <span class="syntax17">&lt;br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;br</span><span class="syntax17"> </span><span class="syntax17">/</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;hr</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;/td</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;/tr</span><span class="syntax17">&gt;</span>
<span class="gutter">   2:</span>   <span class="syntax1">&lt;!--</span><span class="syntax1"> </span><span class="syntax1">FOOTER</span><span class="syntax1"> </span><span class="syntax1">--&gt;</span>
<span class="gutter">   3:</span>   <span class="syntax17">&lt;tr</span><span class="syntax17">&gt;</span><span class="syntax17">&lt;td</span><span class="syntax17"> </span><span class="syntax17">align</span><span class="syntax18">=</span><span class="syntax14">&quot;</span><span class="syntax14">center</span><span class="syntax14">&quot;</span><span class="syntax17">&gt;</span>
<span class="gutter">   4:</span>     <span class="syntax17">&lt;small</span><span class="syntax17">&gt;</span>
<span class="gutterH">   5:</span>     <span class="syntax14">&amp;</span><span class="syntax14">copy</span><span class="syntax14">;</span> <span class="syntax17">&lt;?</span><span class="syntax18">=</span> <span class="syntax9">date</span><span class="syntax18">(</span><span class="syntax14">&quot;</span><span class="syntax14">Y</span><span class="syntax14">&quot;</span><span class="syntax18">)</span> <span class="syntax17">?&gt;</span> ACME Toys. All Rights Reserved.
<span class="gutter">   6:</span>     <span class="syntax17">&lt;/small</span><span class="syntax17">&gt;</span>
<span class="gutter">   7:</span>    <span class="syntax17">&lt;/td</span><span class="syntax17">&gt;</span>
<span class="gutter">   8:</span>   <span class="syntax17">&lt;/tr</span><span class="syntax17">&gt;</span>
<span class="gutter">   9:</span>  <span class="syntax17">&lt;/table</span><span class="syntax17">&gt;</span>
<span class="gutterH">  10:</span> <span class="syntax17">&lt;/body</span><span class="syntax17">&gt;</span>
<span class="gutter">  11:</span><span class="syntax17">&lt;/html</span><span class="syntax17">&gt;</span></span>
</PRE>
</div>
</small></blockquote>
<p>
This is the footer page, HTML, and an embedded PHP function to get the current
year for the copyright. This page is displayed on the bottom of the page.
</p><p>
Below are the SQL statements used to create the table that is being accessed in
the main program. This example is provided only to clarify what is going on in
the pages.php file.
</p>
<h4>
Filename: createDB.sql - The SQL script
</h4>
<blockquote><small>
<div class="disp2">
<PRE>
<span class="syntax0"><span class="gutter">   1:</span><span class="syntax8">use</span> acme;
<span class="gutter">   2:</span>
<span class="gutter">   3:</span><span class="syntax8">CREATE</span> <span class="syntax8">TABLE</span> pages <span class="syntax18">(</span>
<span class="gutter">   4:</span>  <span class="syntax8">name</span> <span class="syntax8">VARCHAR</span><span class="syntax18">(</span><span class="syntax5">50</span><span class="syntax18">)</span> <span class="syntax8">NOT</span> <span class="syntax8">NULL</span>,
<span class="gutterH">   5:</span>  body <span class="syntax8">TEXT</span>
<span class="gutter">   6:</span><span class="syntax18">)</span>;
<span class="gutter">   7:</span>
<span class="gutter">   8:</span><span class="syntax8">insert</span> <span class="syntax8">into</span> pages <span class="syntax18">(</span><span class="syntax8">name</span>, body<span class="syntax18">)</span>
<span class="gutter">   9:</span>  <span class="syntax8">values</span> <span class="syntax18">(</span><span class="syntax13">'</span><span class="syntax13">about_us</span><span class="syntax13">'</span>,
<span class="gutterH">  10:</span><span class="syntax13">'</span><span class="syntax13">&lt;h1&gt;About</span><span class="syntax13"> </span><span class="syntax13">Us&lt;/h1&gt;</span><span class="syntax13"> </span><span class="syntax13">ACME</span><span class="syntax13"> </span><span class="syntax13">Toys</span><span class="syntax13"> </span><span class="syntax13">has</span><span class="syntax13"> </span><span class="syntax13">been</span><span class="syntax13"> </span><span class="syntax13">established</span><span class="syntax13"> </span><span class="syntax13">in</span><span class="syntax13"> </span><span class="syntax13">1850</span><span class="syntax13"> </span><span class="syntax13">to</span>
<span class="gutter">  11:</span><span class="syntax13"> </span><span class="syntax13">provide</span><span class="syntax13"> </span><span class="syntax13">toys</span><span class="syntax13"> </span><span class="syntax13">to</span><span class="syntax13"> </span><span class="syntax13">children</span><span class="syntax13"> </span><span class="syntax13">all</span><span class="syntax13"> </span><span class="syntax13">over</span><span class="syntax13"> </span><span class="syntax13">the</span><span class="syntax13"> </span><span class="syntax13">world</span><span class="syntax13">'</span>
<span class="gutter">  12:</span><span class="syntax18">)</span>;</span>
</PRE>
</div>
</small></blockquote>
<p>
After connecting to the MySQL server, we switch to the database "acme".
Line 2 creates the table "pages" that contains the 'name' and 'body' fields.
</p><p>
The SQL insert statement begins on line 6. This is the data that will become
the body of the Web page pages.php.
</p>
</li>
</ul>
</div>
</body>
</html>
